<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.6">Jekyll</generator><link href="https://jasonthai.me/feed.xml" rel="self" type="application/atom+xml" /><link href="https://jasonthai.me/" rel="alternate" type="text/html" /><updated>2019-12-24T08:13:19+00:00</updated><id>https://jasonthai.me/feed.xml</id><title type="html">Jason’s Notes</title><subtitle>Jason Thai's personal page</subtitle><author><name>Jason Thai</name></author><entry><title type="html">Deploy Nextcloud With Docker Compose in Ubuntu 18.04</title><link href="https://jasonthai.me/blog/2019/11/03/deploy-nextcloud-with-docker-compose/" rel="alternate" type="text/html" title="Deploy Nextcloud With Docker Compose in Ubuntu 18.04" /><published>2019-11-03T00:00:00+00:00</published><updated>2019-11-03T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/11/03/deploy-nextcloud-with-docker-compose</id><content type="html" xml:base="https://jasonthai.me/blog/2019/11/03/deploy-nextcloud-with-docker-compose/">&lt;p&gt;In one of the previous posts, I mentioned using &lt;a href=&quot;https://nextcloud.com/&quot;&gt;Nextcloud&lt;/a&gt; as a self-hosted cloud platform. This post goes into details how I set up my instance.&lt;/p&gt;

&lt;h2 id=&quot;install-docker-and-docker-compose&quot;&gt;Install Docker and Docker-Compose&lt;/h2&gt;
&lt;p&gt;To install docker, run:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To install docker-compose, run:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;docker-composeyml&quot;&gt;docker-compose.yml&lt;/h2&gt;
&lt;p&gt;Create this &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose.yml&lt;/code&gt; with following contents:&lt;/p&gt;
&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;3'&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;db&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;mariadb&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;--transaction-isolation=READ-COMMITTED --binlog-format=ROW&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;restart&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;always&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;volumes&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/opt/nextcloud-db:/var/lib/mysql&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;environment&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;MYSQL_ROOT_PASSWORD=ENTER MYSQL PASSWORD&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;MYSQL_PASSWORD=ENTER MYSQL PASSWORD&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;MYSQL_DATABASE=nextcloud&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;MYSQL_USER=nextcloud&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;redis&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;redis:alpine&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;restart&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;always&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;nextcloud:apache&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;8080:80&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;environment&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;REDIS_HOST=redis&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;depends_on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;db&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;redis&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;volumes&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/opt/nextcloud-data:/var/www/html&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;restart&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;always&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;cron&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;nextcloud:apache&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;restart&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;always&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;volumes&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/opt/nextcloud-data:/var/www/html&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;entrypoint&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/cron.sh&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;depends_on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;db&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;redis&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Run &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose -f docker-compose.yml up -d&lt;/code&gt; to start all necessary containers.&lt;/p&gt;

&lt;h2 id=&quot;setting-up&quot;&gt;Setting Up&lt;/h2&gt;

&lt;p&gt;Browse to &lt;code class=&quot;highlighter-rouge&quot;&gt;http://localhost:8080&lt;/code&gt; and you’ll see a set up page like this:&lt;/p&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/nextcloud-setup.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/nextcloud-setup.png&quot; alt=&quot;Setup&quot; /&gt;
&lt;/picture&gt;

&lt;p&gt;Fill in the fills as the following:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Database user: nextcloud&lt;/li&gt;
  &lt;li&gt;Database password: Enter your password in &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose.yml&lt;/code&gt; file&lt;/li&gt;
  &lt;li&gt;Database name: nextcloud&lt;/li&gt;
  &lt;li&gt;Database host: db&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;After setting up nextcloud, you will see something like:&lt;/p&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/nextcloud.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/nextcloud.jpeg&quot; alt=&quot;Nextcloud&quot; /&gt;
&lt;/picture&gt;

&lt;h2 id=&quot;modify-upload-max-filesize&quot;&gt;Modify Upload Max Filesize&lt;/h2&gt;
&lt;p&gt;By default, Nextcloud only allows uploading file up to 2MB which is not very useful. We can modify the max filesize by adding &lt;code class=&quot;highlighter-rouge&quot;&gt;/opt/nextcloud-data/.htaccess&lt;/code&gt; with following:&lt;/p&gt;
&lt;div class=&quot;language-conf highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;&lt;span class=&quot;n&quot;&gt;IfModule&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mod_php7&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&amp;gt;
...
&lt;span class=&quot;n&quot;&gt;php_value&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upload_max_filesize&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;php_value&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post_max_size&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;
&amp;lt;/&lt;span class=&quot;n&quot;&gt;IfModule&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Jason Thai</name></author><category term="tech" /><category term="en" /><summary type="html">In one of the previous posts, I mentioned using Nextcloud as a self-hosted cloud platform. This post goes into details how I set up my instance. Install Docker and Docker-Compose To install docker, run: curl -fsSL https://get.docker.com -o get-docker.sh sh get-docker.sh To install docker-compose, run: sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose sudo chmod +x /usr/local/bin/docker-compose docker-compose.yml Create this docker-compose.yml with following contents: version: '3' services: db: image: mariadb command: --transaction-isolation=READ-COMMITTED --binlog-format=ROW restart: always volumes: - /opt/nextcloud-db:/var/lib/mysql environment: - MYSQL_ROOT_PASSWORD=ENTER MYSQL PASSWORD - MYSQL_PASSWORD=ENTER MYSQL PASSWORD - MYSQL_DATABASE=nextcloud - MYSQL_USER=nextcloud redis: image: redis:alpine restart: always app: image: nextcloud:apache ports: - 8080:80 environment: - REDIS_HOST=redis depends_on: - db - redis volumes: - /opt/nextcloud-data:/var/www/html restart: always cron: image: nextcloud:apache restart: always volumes: - /opt/nextcloud-data:/var/www/html entrypoint: /cron.sh depends_on: - db - redis Run docker-compose -f docker-compose.yml up -d to start all necessary containers. Setting Up Browse to http://localhost:8080 and you’ll see a set up page like this: Fill in the fills as the following: Database user: nextcloud Database password: Enter your password in docker-compose.yml file Database name: nextcloud Database host: db After setting up nextcloud, you will see something like: Modify Upload Max Filesize By default, Nextcloud only allows uploading file up to 2MB which is not very useful. We can modify the max filesize by adding /opt/nextcloud-data/.htaccess with following: &amp;lt;IfModule mod_php7.c&amp;gt; ... php_value upload_max_filesize 16G php_value post_max_size 16G &amp;lt;/IfModule&amp;gt;</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/NextcloudLogo.png" /></entry><entry><title type="html">What I’m up to in September 2019</title><link href="https://jasonthai.me/blog/2019/10/07/what-im-up-to-in-september-2019/" rel="alternate" type="text/html" title="What I'm up to in September 2019" /><published>2019-10-07T00:00:00+00:00</published><updated>2019-10-07T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/10/07/what-im-up-to-in-september-2019</id><content type="html" xml:base="https://jasonthai.me/blog/2019/10/07/what-im-up-to-in-september-2019/">&lt;p&gt;Vy finally came back after doing internship in Hanoi. It has a brief yet long 3 months for us. We also moved in the new apartment and although it took a while, we reached to a point where everything was set up. We bought a new dining table, 2 chairs, a new bed and some other kitchen items. We did a lot of things together for the first time too like baking. Vy and I managed to successfully bake a coffee cake. We also decided to eat at home more and I started cooking a bit.&lt;/p&gt;

&lt;p&gt;We spent quite a bit of money during this month as the cost of moving and buying things for the new place. As a result, I skipped one cycle of investing. Hopefully this will resume this coming month of October.&lt;/p&gt;

&lt;p&gt;I did not run so much in September and my legs are getting itchy. Hopefully I’ll run again soon in the new area.&lt;/p&gt;

&lt;p&gt;This upcoming month of October is the &lt;a href=&quot;https://www.dhs.gov/national-cyber-security-awareness-month&quot;&gt;Cybersecurity Awareness Month&lt;/a&gt;, please spend sometime going over your online presence, updating your passwords. That’s all folks.&lt;/p&gt;</content><author><name>Jason Thai</name></author><category term="blog" /><category term="en" /><summary type="html">Vy finally came back after doing internship in Hanoi. It has a brief yet long 3 months for us. We also moved in the new apartment and although it took a while, we reached to a point where everything was set up. We bought a new dining table, 2 chairs, a new bed and some other kitchen items. We did a lot of things together for the first time too like baking. Vy and I managed to successfully bake a coffee cake. We also decided to eat at home more and I started cooking a bit. We spent quite a bit of money during this month as the cost of moving and buying things for the new place. As a result, I skipped one cycle of investing. Hopefully this will resume this coming month of October. I did not run so much in September and my legs are getting itchy. Hopefully I’ll run again soon in the new area. This upcoming month of October is the Cybersecurity Awareness Month, please spend sometime going over your online presence, updating your passwords. That’s all folks.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/the-month-september.jpg" /></entry><entry><title type="html">What I’m up to in August 2019</title><link href="https://jasonthai.me/blog/2019/09/01/what-im-up-to-in-august-2019/" rel="alternate" type="text/html" title="What I'm up to in August 2019" /><published>2019-09-01T00:00:00+00:00</published><updated>2019-09-01T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/09/01/what-im-up-to-in-august-2019</id><content type="html" xml:base="https://jasonthai.me/blog/2019/09/01/what-im-up-to-in-august-2019/">&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/month-of-august.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/month-of-august.jpg&quot; alt=&quot;August&quot; /&gt;
&lt;/picture&gt;

&lt;p&gt;This month has been busy. I have been learning more about self-hosting software and doing some tinkering with them.&lt;/p&gt;

&lt;p&gt;Currently I am checking out these 2 subreddits:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://reddit.com/r/selfhosted&quot;&gt;https://reddit.com/r/selfhosted&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://reddit.com/r/homelab&quot;&gt;https://reddit.com/r/homelab&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;These subs give me some motivation of creating my home server to store data and share with families and friends. But that will be the next step as I am using a cloud provider to do my hosting.&lt;/p&gt;

&lt;p&gt;What I am hosting:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://bitwarden.com&quot;&gt;Bitwarden&lt;/a&gt; - Opensource password manager. I decided to delete my Lastpass’s account and use a self-hosted Bitwarden instance to manage my passwords. So far so good. I keep my data.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://nextcloud.com&quot;&gt;Nextcloud&lt;/a&gt; - Productivity platform (Gsuite replacement). I use this to sync my files across computers. The platform offers a lot more than just file syncing. I haven’t explored much but it looks promising. Another file syncing alternative is &lt;a href=&quot;https://seafile.com&quot;&gt;Seafile&lt;/a&gt; which people say is more reliable.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://plex.tv&quot;&gt;Plex&lt;/a&gt; - Media organizer. I am also exploring hosting my media so I can view them everywhere. Another popular alternative is &lt;a href=&quot;https://github.com/jellyfin/jellyfin&quot;&gt;Jellyfin&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://tt-rss.org&quot;&gt;TT-RSS&lt;/a&gt; - RSS feeds&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://firefly-iii.org/&quot;&gt;Firefly-III&lt;/a&gt; - Budget app. I am also trying out this budget app. It is quite different from my &lt;a href=&quot;https://www.youneedabudget.com/&quot;&gt;YNAB&lt;/a&gt; and needs taking used too. So far I am more pleased with the latter one.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you want to try out these services, let me know and I can give you access to them.&lt;/p&gt;

&lt;p&gt;Moving on…
I am still reading about finance this month. They are easy to understand and are a nice complement to the ones I read in July. I highly recommend these books.&lt;/p&gt;

&lt;style type=&quot;text/css&quot; media=&quot;screen&quot;&gt;
  .gr_custom_container_1567354622 {
    /* customize your Goodreads widget container here*/
    border: 1px solid gray;
    border-radius:10px;
    padding: 10px 5px 10px 5px;
    background-color: #FFFFFF;
    color: #000000;
    width: 300px
  }
  .gr_custom_header_1567354622 {
    /* customize your Goodreads header here*/
    border-bottom: 1px solid gray;
    width: 100%;
    margin-bottom: 5px;
    text-align: center;
    font-size: 120%
  }
  .gr_custom_each_container_1567354622 {
    /* customize each individual book container here */
    width: 100%;
    clear: both;
    margin-bottom: 10px;
    overflow: auto;
    padding-bottom: 4px;
    border-bottom: 1px solid #aaa;
  }
  .gr_custom_book_container_1567354622 {
    /* customize your book covers here */
    overflow: hidden;
    height: 60px;
      float: left;
      margin-right: 4px;
      width: 39px;
  }
  .gr_custom_author_1567354622 {
    /* customize your author names here */
    font-size: 10px;
  }
  .gr_custom_tags_1567354622 {
    /* customize your tags here */
    font-size: 10px;
    color: gray;
  }
  .gr_custom_rating_1567354622 {
    /* customize your rating stars here */
    float: right;
  }
&lt;/style&gt;

&lt;div align=&quot;center&quot; id=&quot;gr_custom_widget_1567354622&quot;&gt;
          &lt;div class=&quot;gr_custom_container_1567354622&quot;&gt;
    &lt;h2 class=&quot;gr_custom_header_1567354622&quot;&gt;
    &lt;a style=&quot;text-decoration: none;&quot; rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/list/54938708-jason-thai?shelf=august-2019&amp;amp;utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;Jason&amp;#39;s bookshelf: august-2019&lt;/a&gt;
    &lt;/h2&gt;
      &lt;div class=&quot;gr_custom_each_container_1567354622&quot;&gt;
          &lt;div class=&quot;gr_custom_book_container_1567354622&quot;&gt;
            &lt;a title=&quot;The Bogleheads' Guide to Investing&quot; rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/show/2960404866?utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;&lt;img alt=&quot;The Bogleheads' Guide to Investing&quot; border=&quot;0&quot; src=&quot;https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1388380454l/381355._SY75_.jpg&quot; /&gt;&lt;/a&gt;
          &lt;/div&gt;
          &lt;div class=&quot;gr_custom_rating_1567354622&quot;&gt;
            &lt;span class=&quot; staticStars notranslate&quot;&gt;&lt;img src=&quot;https://www.goodreads.com/images/layout/gr_red_star_inactive.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_inactive.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_inactive.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_inactive.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_inactive.png&quot; /&gt;&lt;/span&gt;
          &lt;/div&gt;
          &lt;div class=&quot;gr_custom_title_1567354622&quot;&gt;
            &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/show/2960404866?utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;The Bogleheads' Guide to Investing&lt;/a&gt;
          &lt;/div&gt;
          &lt;div class=&quot;gr_custom_author_1567354622&quot;&gt;
            by &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/author/show/66008.Taylor_Larimore&quot;&gt;Taylor Larimore&lt;/a&gt;
          &lt;/div&gt;
          &lt;div class=&quot;gr_custom_tags_1567354622&quot;&gt;
            tagged:
            august-2019
          &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class=&quot;gr_custom_each_container_1567354622&quot;&gt;
          &lt;div class=&quot;gr_custom_book_container_1567354622&quot;&gt;
            &lt;a title=&quot;The Bogleheads' Guide to the Three-Fund Portfolio: How a Simple Portfolio of Three Total Market Index Funds Outperforms Most Investors with Less Risk&quot; rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/show/2960405014?utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;&lt;img alt=&quot;The Bogleheads' Guide to the Three-Fund Portfolio: How a Simple Portfolio of Three Total Market Index Funds Outperforms Most Investors with Less Risk&quot; border=&quot;0&quot; src=&quot;https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1528428190l/36809342._SY75_.jpg&quot; /&gt;&lt;/a&gt;
          &lt;/div&gt;
          &lt;div class=&quot;gr_custom_rating_1567354622&quot;&gt;
            &lt;span class=&quot; staticStars notranslate&quot;&gt;&lt;img src=&quot;https://www.goodreads.com/images/layout/gr_red_star_inactive.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_inactive.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_inactive.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_inactive.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_inactive.png&quot; /&gt;&lt;/span&gt;
          &lt;/div&gt;
          &lt;div class=&quot;gr_custom_title_1567354622&quot;&gt;
            &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/show/2960405014?utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;The Bogleheads' Guide to the Three-Fund Portfolio: How a Simple Portfolio of Three Total Market Index Funds Outperforms Most Investors with Less Risk&lt;/a&gt;
          &lt;/div&gt;
          &lt;div class=&quot;gr_custom_author_1567354622&quot;&gt;
            by &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/author/show/66008.Taylor_Larimore&quot;&gt;Taylor Larimore&lt;/a&gt;
          &lt;/div&gt;
          &lt;div class=&quot;gr_custom_tags_1567354622&quot;&gt;
            tagged:
            august-2019
          &lt;/div&gt;
      &lt;/div&gt;
  &lt;br style=&quot;clear: both&quot; /&gt;
  &lt;center&gt;
    &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/&quot;&gt;&lt;img alt=&quot;goodreads.com&quot; style=&quot;border:0&quot; src=&quot;https://www.goodreads.com/images/widget/widget_logo.gif&quot; /&gt;&lt;/a&gt;
  &lt;/center&gt;
  &lt;noscript&gt;
    Share &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/&quot;&gt;book reviews&lt;/a&gt; and ratings with Jason, and even join a &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/group&quot;&gt;book club&lt;/a&gt; on Goodreads.
  &lt;/noscript&gt;
  &lt;/div&gt;

      &lt;/div&gt;
&lt;script src=&quot;https://www.goodreads.com/review/custom_widget/54938708.Jason's%20bookshelf:%20august-2019?cover_position=left&amp;amp;cover_size=small&amp;amp;num_books=5&amp;amp;order=a&amp;amp;shelf=august-2019&amp;amp;show_author=1&amp;amp;show_cover=1&amp;amp;show_rating=1&amp;amp;show_review=1&amp;amp;show_tags=1&amp;amp;show_title=1&amp;amp;sort=date_added&amp;amp;widget_bg_color=FFFFFF&amp;amp;widget_bg_transparent=&amp;amp;widget_border_width=1&amp;amp;widget_id=1567354622&amp;amp;widget_text_color=000000&amp;amp;widget_title_size=medium&amp;amp;widget_width=medium&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;p&gt;Finally the biggest news, I am moving this upcoming September! I have been living at my current place for over four years. It suits well for a bachelor who is living alone. Now Vy is here with me, I want us to live someplace bigger and more comfortable. So it is exciting to move yet it is a little bit bittersweet as the current landlords are very nice people. Anyway, looking forward to the new place!&lt;/p&gt;</content><author><name>Jason Thai</name></author><category term="blog" /><category term="en" /><summary type="html">This month has been busy. I have been learning more about self-hosting software and doing some tinkering with them. Currently I am checking out these 2 subreddits: https://reddit.com/r/selfhosted https://reddit.com/r/homelab These subs give me some motivation of creating my home server to store data and share with families and friends. But that will be the next step as I am using a cloud provider to do my hosting. What I am hosting: Bitwarden - Opensource password manager. I decided to delete my Lastpass’s account and use a self-hosted Bitwarden instance to manage my passwords. So far so good. I keep my data. Nextcloud - Productivity platform (Gsuite replacement). I use this to sync my files across computers. The platform offers a lot more than just file syncing. I haven’t explored much but it looks promising. Another file syncing alternative is Seafile which people say is more reliable. Plex - Media organizer. I am also exploring hosting my media so I can view them everywhere. Another popular alternative is Jellyfin TT-RSS - RSS feeds Firefly-III - Budget app. I am also trying out this budget app. It is quite different from my YNAB and needs taking used too. So far I am more pleased with the latter one. If you want to try out these services, let me know and I can give you access to them. Moving on… I am still reading about finance this month. They are easy to understand and are a nice complement to the ones I read in July. I highly recommend these books. Jason&amp;#39;s bookshelf: august-2019 The Bogleheads' Guide to Investing by Taylor Larimore tagged: august-2019 The Bogleheads' Guide to the Three-Fund Portfolio: How a Simple Portfolio of Three Total Market Index Funds Outperforms Most Investors with Less Risk by Taylor Larimore tagged: august-2019 Share book reviews and ratings with Jason, and even join a book club on Goodreads. Finally the biggest news, I am moving this upcoming September! I have been living at my current place for over four years. It suits well for a bachelor who is living alone. Now Vy is here with me, I want us to live someplace bigger and more comfortable. So it is exciting to move yet it is a little bit bittersweet as the current landlords are very nice people. Anyway, looking forward to the new place!</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/month-of-august.jpg" /></entry><entry><title type="html">How to host OpenVPN and Pi-hole on Ubuntu 18.04 VPS</title><link href="https://jasonthai.me/blog/2019/08/25/how-to-host-openvpn-and-pi-hole-on-ubuntu-1804-vps/" rel="alternate" type="text/html" title="How to host OpenVPN and Pi-hole on Ubuntu 18.04 VPS" /><published>2019-08-25T00:00:00+00:00</published><updated>2019-08-25T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/08/25/how-to-host-openvpn-and-pi-hole-on-ubuntu-1804-vps</id><content type="html" xml:base="https://jasonthai.me/blog/2019/08/25/how-to-host-openvpn-and-pi-hole-on-ubuntu-1804-vps/">&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;
&lt;p&gt;I have been playing around with setting up my own &lt;a href=&quot;https://openvpn.net&quot;&gt;OpenVPN server&lt;/a&gt; lately and also found out &lt;a href=&quot;https://pi-hole.net&quot;&gt;Pi-hole&lt;/a&gt;.  OpenVPN provides a way to set up a VPN that I can self manage and Pi-hole is a network wide ad blocking system. The two combined services provide a good way to make your web browsing experience more secure and ad-free.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.pi-hole.net/guides/vpn/setup-openvpn-server/&quot;&gt;I followed the guide on Pi-hole to set up a VPN server&lt;/a&gt; but I found out that some information is missing depending on the type of VPS you have such as whether your VPS is a NAT VPS or not. Below is the documented steps of all my findings.&lt;/p&gt;

&lt;h2 id=&quot;installation&quot;&gt;Installation&lt;/h2&gt;

&lt;h3 id=&quot;openvpn-setup&quot;&gt;OpenVPN Setup&lt;/h3&gt;
&lt;p&gt;Run these scripts:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wget https://git.io/vpn &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; openvpn-install.sh
&lt;span class=&quot;nb&quot;&gt;chmod &lt;/span&gt;755 openvpn-install.sh
./openvpn-install.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Follow this setup:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Welcome to this quick OpenVPN &lt;span class=&quot;s2&quot;&gt;&quot;road warrior&quot;&lt;/span&gt; installer

I need to ask you a few questions before starting the setup
You can leave the default options and just press enter &lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;you are ok with them

First I need to know the IPv4 address of the network interface you want OpenVPN
listening to.
IP address: 10.8.0.1 // Jason&lt;span class=&quot;s1&quot;&gt;'s notes: if you are behind NAT, just put your  ipv4 IP address

Which protocol do you want for OpenVPN connections?
   1) UDP (recommended)
   2) TCP
Protocol [1-2]: 1

What port do you want OpenVPN listening to?
Port: 1194

Which DNS do you want to use with the VPN?
   1) Current system resolvers
   2) Google
   3) OpenDNS
   4) NTT
   5) Hurricane Electric
   6) Verisign
DNS [1-6]: 1

Finally, tell me your name for the client certificate
Please, use one word only, no special characters
Client name: pihole

Okay, that was all I needed. We are ready to set up your OpenVPN server now
Press any key to continue...
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;start-openvpn&quot;&gt;Start OpenVPN&lt;/h3&gt;
&lt;p&gt;I had to modify the existing OpenVPN service in &lt;code class=&quot;highlighter-rouge&quot;&gt;/lib/systemd/system/openvpn.service&lt;/code&gt; with the following:&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# This service is actually a systemd target,&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# but we are using a service since targets cannot be reloaded.&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Unit]
&lt;span class=&quot;nv&quot;&gt;Description&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;OpenVPN service
&lt;span class=&quot;nv&quot;&gt;After&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;network.target

&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Service]
&lt;span class=&quot;nv&quot;&gt;Type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;oneshot
&lt;span class=&quot;nv&quot;&gt;RemainAfterExit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;yes
&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ExecStart&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/bin/true
&lt;span class=&quot;nv&quot;&gt;ExecReload&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/bin/true
&lt;span class=&quot;nv&quot;&gt;WorkingDirectory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/etc/openvpn/server

&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Install]
&lt;span class=&quot;nv&quot;&gt;WantedBy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;multi-user.target
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also modify OpenVPN server’s configuration in &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/openvpn/server/server.conf&lt;/code&gt;:
remove all the existing &lt;code class=&quot;highlighter-rouge&quot;&gt;push &quot;dhcp-option DNS x.x.x.x&lt;/code&gt; and add &lt;code class=&quot;highlighter-rouge&quot;&gt;push &quot;dhcp-optioni DNS 10.8.0.1&quot;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Restart OpenVPN services:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;systemctl daemon-reload
systemctl restart openvpn // Jason&lt;span class=&quot;s1&quot;&gt;'s notes: just restarting openvpn does not change the configuration for OpenVPN server.
systemctl restart openvpn-server@server.service
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notes: if you are behind a NAT, you will also need to do the following:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ip r | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;default

&lt;span class=&quot;c&quot;&gt;# Output from ip r | grep default&lt;/span&gt;
default via x.x.x.x dev eth0 onlink
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Note the value after &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; in this case it is &lt;code class=&quot;highlighter-rouge&quot;&gt;eth0&lt;/code&gt;
Run  this:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;iptables &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; nat &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt; POSTROUTING  &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; 10.8.0.0/24 &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; &amp;lt;value you got from above&amp;gt; &lt;span class=&quot;nt&quot;&gt;-j&lt;/span&gt; MASQUERADE

&lt;span class=&quot;c&quot;&gt;# Example:&lt;/span&gt;
iptables &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; nat &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt; POSTROUTING &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; 10.8.0.0/24 &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; eth0 &lt;span class=&quot;nt&quot;&gt;-j&lt;/span&gt; MASQUERADE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;pi-hole-setup&quot;&gt;Pi-hole Setup&lt;/h3&gt;
&lt;p&gt;Run this script:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-sSL&lt;/span&gt; https://install.pi-hole.net | bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Follow the instruction to set up pi-hole:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Installing dependencies&lt;/li&gt;
&lt;/ul&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/pihole-step-1.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/pihole-step-1.png&quot; alt=&quot;step 1&quot; /&gt;
&lt;/picture&gt;

&lt;ul&gt;
  &lt;li&gt;Some instruction&lt;/li&gt;
&lt;/ul&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/pihole-step-2.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/pihole-step-2.png&quot; alt=&quot;step 2&quot; /&gt;
&lt;/picture&gt;

&lt;ul&gt;
  &lt;li&gt;Some information&lt;/li&gt;
&lt;/ul&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/pihole-step-3.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/pihole-step-3.png&quot; alt=&quot;step 3&quot; /&gt;
&lt;/picture&gt;

&lt;ul&gt;
  &lt;li&gt;This informs we need a &lt;strong&gt;static IP address&lt;/strong&gt; in order the the whole thing to work&lt;/li&gt;
&lt;/ul&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/pihole-step-4.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/pihole-step-4.png&quot; alt=&quot;step 4&quot; /&gt;
&lt;/picture&gt;

&lt;ul&gt;
  &lt;li&gt;The following step is important, make sure to select &lt;code class=&quot;highlighter-rouge&quot;&gt;tun0&lt;/code&gt; as the interface&lt;/li&gt;
&lt;/ul&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/pihole-step-5.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/pihole-step-5.png&quot; alt=&quot;step 5&quot; /&gt;
&lt;/picture&gt;

&lt;ul&gt;
  &lt;li&gt;Choose the DNS provider Pi-hole will use. This is interesting. Essentially we will set up pi-hole as a DNS OpenVPN server will use, and within Pi-hole it will use the DNS setting below to make outbound requests.&lt;/li&gt;
&lt;/ul&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/pihole-step-6.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/pihole-step-6.png&quot; alt=&quot;step 6&quot; /&gt;
&lt;/picture&gt;

&lt;ul&gt;
  &lt;li&gt;Choose the protocols available to you&lt;/li&gt;
&lt;/ul&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/pihole-step-7.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/pihole-step-7.png&quot; alt=&quot;step 7&quot; /&gt;
&lt;/picture&gt;

&lt;ul&gt;
  &lt;li&gt;This following step is important, make sure to choose &lt;code class=&quot;highlighter-rouge&quot;&gt;no&lt;/code&gt; so we can assign our internal address which is &lt;code class=&quot;highlighter-rouge&quot;&gt;10.8.0.1&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/pihole-step-8.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/pihole-step-8.png&quot; alt=&quot;step 8&quot; /&gt;
&lt;/picture&gt;

&lt;ul&gt;
  &lt;li&gt;Enter &lt;code class=&quot;highlighter-rouge&quot;&gt;10.8.0.1/24&lt;/code&gt;. This is the static address VPN will use to talk to Pi-hole&lt;/li&gt;
&lt;/ul&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/pihole-step-9.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/pihole-step-9.png&quot; alt=&quot;step 9&quot; /&gt;
&lt;/picture&gt;

&lt;ul&gt;
  &lt;li&gt;Enter the ipv4-gateway. I just leave this as is.&lt;/li&gt;
&lt;/ul&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/pihole-step-10.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/pihole-step-10.png&quot; alt=&quot;step 10&quot; /&gt;
&lt;/picture&gt;

&lt;ul&gt;
  &lt;li&gt;There are a few more steps but I just choose the default settings.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;test-dns-settings&quot;&gt;Test DNS settings&lt;/h3&gt;
&lt;p&gt;Run this script&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;host google.com 10.8.0.1

&lt;span class=&quot;c&quot;&gt;# Output from host google.com 10.8.0.1&lt;/span&gt;
google.com has address 172.217.0.46
google.com has IPv6 address 2607:f8b0:4005:80b::200e
google.com mail is handled by 10 aspmx.l.google.com.
google.com mail is handled by 20 alt1.aspmx.l.google.com.
google.com mail is handled by 30 alt2.aspmx.l.google.com.
google.com mail is handled by 40 alt3.aspmx.l.google.com.
google.com mail is handled by 50 alt4.aspmx.l.google.com.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Our OpenVPN + Pi-hole still see google.com’s public IPs properly&lt;/p&gt;

&lt;p&gt;This time run&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;host pagead2.googlesyndication.com

&lt;span class=&quot;c&quot;&gt;# Output from host pagead2.googlesyndication.com&lt;/span&gt;
pagead2.googlesyndication.com has address 0.0.0.0
pagead2.googlesyndication.com has IPv6 address ::
pagead2.googlesyndication.com is an &lt;span class=&quot;nb&quot;&gt;alias &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;pagead46.l.doubleclick.net.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Pi-hole blocked &lt;code class=&quot;highlighter-rouge&quot;&gt;pagead2.googlesyndication.com&lt;/code&gt; as the domain is in its blacklist.&lt;/p&gt;

&lt;h3 id=&quot;firewall-setup&quot;&gt;Firewall Setup&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.pi-hole.net/guides/vpn/firewall/&quot;&gt;I followed Pi-hole’s setup&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;generate-openvpn-client-config-file&quot;&gt;Generate OpenVPN Client Config File&lt;/h3&gt;
&lt;p&gt;Run &lt;code class=&quot;highlighter-rouge&quot;&gt;./openvpn-install.sh&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;test-from-browser&quot;&gt;Test From Browser&lt;/h3&gt;
&lt;p&gt;After connecting to your VPN using OpenVPN client. Go to this address &lt;a href=&quot;http://pagead2.googlesyndication.com&quot;&gt;http://pagead2.googlesyndication.com&lt;/a&gt;, if everything works correctly you will see this:&lt;/p&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/google-syndication.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/google-syndication.png&quot; alt=&quot;google syndication&quot; /&gt;
&lt;/picture&gt;

&lt;h3 id=&quot;pi-hole-statistics&quot;&gt;Pi-hole Statistics&lt;/h3&gt;
&lt;p&gt;You can go to &lt;code class=&quot;highlighter-rouge&quot;&gt;http://pi.hole/admin&lt;/code&gt; once you are connected to the VPN and see some of Pi-hole’s stats. The result is mind-boggling. Almost half of my traffic is to serve ads.&lt;/p&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/pi-hole-stats.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/pi-hole-stats.png&quot; alt=&quot;Pi-hole stats&quot; /&gt;
&lt;/picture&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Pi-hole is a good solution to fight against ads on the internet. You should give it a try. That said not all ads are bad. Some creators are reliant on ads as their source of income. If you have someone you support, consider whitelisting the ads for the good cause.&lt;/p&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.pi-hole.net/guides/vpn/overview/&quot;&gt;https://docs.pi-hole.net/guides/vpn/overview/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.digitalocean.com/community/tutorials/how-to-block-advertisements-at-the-dns-level-using-pi-hole-and-openvpn-on-ubuntu-16-04&quot;&gt;https://www.digitalocean.com/community/tutorials/how-to-block-advertisements-at-the-dns-level-using-pi-hole-and-openvpn-on-ubuntu-16-04&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://wiki.openvz.org/VPN_via_the_TUN/TAP_device&quot;&gt;https://wiki.openvz.org/VPN_via_the_TUN/TAP_device&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Jason Thai</name></author><category term="tech" /><category term="en" /><summary type="html">Introduction I have been playing around with setting up my own OpenVPN server lately and also found out Pi-hole. OpenVPN provides a way to set up a VPN that I can self manage and Pi-hole is a network wide ad blocking system. The two combined services provide a good way to make your web browsing experience more secure and ad-free. I followed the guide on Pi-hole to set up a VPN server but I found out that some information is missing depending on the type of VPS you have such as whether your VPS is a NAT VPS or not. Below is the documented steps of all my findings. Installation OpenVPN Setup Run these scripts: wget https://git.io/vpn -O openvpn-install.sh chmod 755 openvpn-install.sh ./openvpn-install.sh Follow this setup: Welcome to this quick OpenVPN &quot;road warrior&quot; installer I need to ask you a few questions before starting the setup You can leave the default options and just press enter if you are ok with them First I need to know the IPv4 address of the network interface you want OpenVPN listening to. IP address: 10.8.0.1 // Jason's notes: if you are behind NAT, just put your ipv4 IP address Which protocol do you want for OpenVPN connections? 1) UDP (recommended) 2) TCP Protocol [1-2]: 1 What port do you want OpenVPN listening to? Port: 1194 Which DNS do you want to use with the VPN? 1) Current system resolvers 2) Google 3) OpenDNS 4) NTT 5) Hurricane Electric 6) Verisign DNS [1-6]: 1 Finally, tell me your name for the client certificate Please, use one word only, no special characters Client name: pihole Okay, that was all I needed. We are ready to set up your OpenVPN server now Press any key to continue... Start OpenVPN I had to modify the existing OpenVPN service in /lib/systemd/system/openvpn.service with the following: # This service is actually a systemd target, # but we are using a service since targets cannot be reloaded. [Unit] Description=OpenVPN service After=network.target [Service] Type=oneshot RemainAfterExit=yes ExecStart=/bin/true ExecReload=/bin/true WorkingDirectory=/etc/openvpn/server [Install] WantedBy=multi-user.target Also modify OpenVPN server’s configuration in /etc/openvpn/server/server.conf: remove all the existing push &quot;dhcp-option DNS x.x.x.x and add push &quot;dhcp-optioni DNS 10.8.0.1&quot; Restart OpenVPN services: systemctl daemon-reload systemctl restart openvpn // Jason's notes: just restarting openvpn does not change the configuration for OpenVPN server. systemctl restart openvpn-server@server.service Notes: if you are behind a NAT, you will also need to do the following: ip r | grep default # Output from ip r | grep default default via x.x.x.x dev eth0 onlink Note the value after dev in this case it is eth0 Run this: iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o &amp;lt;value you got from above&amp;gt; -j MASQUERADE # Example: iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j MASQUERADE Pi-hole Setup Run this script: curl -sSL https://install.pi-hole.net | bash Follow the instruction to set up pi-hole: Installing dependencies Some instruction Some information This informs we need a static IP address in order the the whole thing to work The following step is important, make sure to select tun0 as the interface Choose the DNS provider Pi-hole will use. This is interesting. Essentially we will set up pi-hole as a DNS OpenVPN server will use, and within Pi-hole it will use the DNS setting below to make outbound requests. Choose the protocols available to you This following step is important, make sure to choose no so we can assign our internal address which is 10.8.0.1. Enter 10.8.0.1/24. This is the static address VPN will use to talk to Pi-hole Enter the ipv4-gateway. I just leave this as is. There are a few more steps but I just choose the default settings. Test DNS settings Run this script host google.com 10.8.0.1 # Output from host google.com 10.8.0.1 google.com has address 172.217.0.46 google.com has IPv6 address 2607:f8b0:4005:80b::200e google.com mail is handled by 10 aspmx.l.google.com. google.com mail is handled by 20 alt1.aspmx.l.google.com. google.com mail is handled by 30 alt2.aspmx.l.google.com. google.com mail is handled by 40 alt3.aspmx.l.google.com. google.com mail is handled by 50 alt4.aspmx.l.google.com. Our OpenVPN + Pi-hole still see google.com’s public IPs properly This time run host pagead2.googlesyndication.com # Output from host pagead2.googlesyndication.com pagead2.googlesyndication.com has address 0.0.0.0 pagead2.googlesyndication.com has IPv6 address :: pagead2.googlesyndication.com is an alias for pagead46.l.doubleclick.net. Pi-hole blocked pagead2.googlesyndication.com as the domain is in its blacklist. Firewall Setup I followed Pi-hole’s setup Generate OpenVPN Client Config File Run ./openvpn-install.sh Test From Browser After connecting to your VPN using OpenVPN client. Go to this address http://pagead2.googlesyndication.com, if everything works correctly you will see this: Pi-hole Statistics You can go to http://pi.hole/admin once you are connected to the VPN and see some of Pi-hole’s stats. The result is mind-boggling. Almost half of my traffic is to serve ads. Conclusion Pi-hole is a good solution to fight against ads on the internet. You should give it a try. That said not all ads are bad. Some creators are reliant on ads as their source of income. If you have someone you support, consider whitelisting the ads for the good cause. References https://docs.pi-hole.net/guides/vpn/overview/ https://www.digitalocean.com/community/tutorials/how-to-block-advertisements-at-the-dns-level-using-pi-hole-and-openvpn-on-ubuntu-16-04 https://wiki.openvz.org/VPN_via_the_TUN/TAP_device</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/openvpn-pihole.png" /></entry><entry><title type="html">How to host Commento on Apache Webserver</title><link href="https://jasonthai.me/blog/2019/08/12/how-to-host-commento-on-apache-webserver/" rel="alternate" type="text/html" title="How to host Commento on Apache Webserver" /><published>2019-08-12T00:00:00+00:00</published><updated>2019-08-12T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/08/12/how-to-host-commento-on-apache-webserver</id><content type="html" xml:base="https://jasonthai.me/blog/2019/08/12/how-to-host-commento-on-apache-webserver/">&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/commento-logo.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/commento-logo.png&quot; alt=&quot;Commento Logo&quot; /&gt;
&lt;/picture&gt;

&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;
&lt;p&gt;I recently switched from using Disqus comment system to Commento. The reason is that I am in favor of a non-tracking and lightweight system which Commento satisfies. This note will go over the steps to host Commento using Apache webserver.&lt;/p&gt;

&lt;h2 id=&quot;prerequisites&quot;&gt;Prerequisites&lt;/h2&gt;
&lt;p&gt;A few things you will need:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;A server. If you have not got one, I recommended using &lt;a href=&quot;https://m.do.co/c/c544762f5c36&quot;&gt;Digital Ocean&lt;/a&gt;. A $5 droplet is sufficient.&lt;/li&gt;
  &lt;li&gt;A domain which has an A record pointing your domain to your server’s IP. For example, I have an A record that points my subdomain &lt;code class=&quot;highlighter-rouge&quot;&gt;commento&lt;/code&gt; to my server’s IP so Commento is available on &lt;a href=&quot;https://commento.jasonthai.me&quot;&gt;https://commento.jasonthai.me&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;When you create a VPS, you will be asked which OS to install. I chose to use Ubuntu 18.04 as there are a lot of tutorials online for Ubuntu to help you get started.&lt;/p&gt;

&lt;h2 id=&quot;setting-up-commento&quot;&gt;Setting up Commento&lt;/h2&gt;
&lt;h3 id=&quot;install-apache2&quot;&gt;Install Apache2&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://www.digitalocean.com/community/tutorials/how-to-install-the-apache-web-server-on-ubuntu-18-04-quickstart&quot;&gt;Follow this tutorial on Digital Ocean to help you get started setting up Apache&lt;/a&gt;.
It contains all the necessary information to help you install Apache.&lt;/p&gt;

&lt;h3 id=&quot;install-postgresql&quot;&gt;Install PostgreSQL&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://www.digitalocean.com/community/tutorials/how-to-install-and-use-postgresql-on-ubuntu-18-04&quot;&gt;Follow this tutorial to install PostgreSQL on your VPS&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I chose to create a new user &lt;code class=&quot;highlighter-rouge&quot;&gt;commento&lt;/code&gt; and database &lt;code class=&quot;highlighter-rouge&quot;&gt;commento&lt;/code&gt; so that I can use it later.&lt;/p&gt;

&lt;p&gt;To allow the new user to access the database without any password, I made the following change to &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/postgresql/10/main/pg_hba.conf&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# TYPE  DATABASE        USER            ADDRESS                 METHOD

# &quot;local&quot; is for Unix domain socket connections only
local   all             all                                     trust &amp;lt;- by default it is ident which required password input
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I also made the following change to &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/postgresql/10/main/postgresql.conf&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// uncommented
listen_addresses = 'localhost'        # what IP address(es) to listen on;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is to allow using &lt;code class=&quot;highlighter-rouge&quot;&gt;localhost&lt;/code&gt; as the default host for connecting to postgres database on the server.&lt;/p&gt;

&lt;h3 id=&quot;installing-commento&quot;&gt;Installing Commento&lt;/h3&gt;
&lt;p&gt;In the following section, I use &lt;strong&gt;commento.jasonthai.me&lt;/strong&gt; as my subdomain to host Commento, you can just replace it with whatever domain you will be using&lt;/p&gt;

&lt;p&gt;Enter the following commands:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;wget https://commento-release.s3.amazonaws.com/commento-linux-amd64-v1.7.0.tar.gz&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;mkdir /usr/share/commento&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;tar xvf commento-linux-amd64-v1.7.0.tar.gz -C /usr/share/commento&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Create a new file &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/systemd/system/commento.service&lt;/code&gt;:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-conf highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[&lt;span class=&quot;n&quot;&gt;Unit&lt;/span&gt;]
&lt;span class=&quot;n&quot;&gt;Description&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;Commento&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;daemon&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;service&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;After&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;network&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;postgresql&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;service&lt;/span&gt;

[&lt;span class=&quot;n&quot;&gt;Service&lt;/span&gt;]
&lt;span class=&quot;n&quot;&gt;Type&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;simple&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ExecStart&lt;/span&gt;=/&lt;span class=&quot;n&quot;&gt;usr&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;bin&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;commento&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_ORIGIN&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;https&lt;/span&gt;://&lt;span class=&quot;n&quot;&gt;commento&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;jasonthai&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;me&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_PORT&lt;/span&gt;=&lt;span class=&quot;m&quot;&gt;8080&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_POSTGRES&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;postgres&lt;/span&gt;://&lt;span class=&quot;n&quot;&gt;commento&lt;/span&gt;@&lt;span class=&quot;n&quot;&gt;localhost&lt;/span&gt;:&lt;span class=&quot;m&quot;&gt;5432&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;commento&lt;/span&gt;?&lt;span class=&quot;n&quot;&gt;sslmode&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;disable&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_STATIC&lt;/span&gt;=/&lt;span class=&quot;n&quot;&gt;usr&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;share&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;commento&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_FORBID_NEW_OWNERS&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;true&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_SMTP_HOST&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;ENTER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;YOUR&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;VALUE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HERE&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_SMTP_PORT&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;ENTER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;YOUR&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;VALUE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HERE&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_SMTP_USERNAME&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;ENTER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;YOUR&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;VALUE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HERE&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_SMTP_PASSWORD&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;ENTER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;YOUR&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;VALUE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HERE&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_SMTP_FROM_ADDRESS&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;no&lt;/span&gt;-&lt;span class=&quot;n&quot;&gt;reply&lt;/span&gt;@&lt;span class=&quot;n&quot;&gt;commento&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;io&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Set Google OAuth credentials
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_GOOGLE_KEY&lt;/span&gt;=
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_GOOGLE_SECRET&lt;/span&gt;=

&lt;span class=&quot;c&quot;&gt;# Set Github OAuth credentials
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_GITHUB_KEY&lt;/span&gt;=
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_GITHUB_SECRET&lt;/span&gt;=

&lt;span class=&quot;c&quot;&gt;# Set Twitter OAuth credentials
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_TWITTER_KEY&lt;/span&gt;=
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_TWITTER_SECRET&lt;/span&gt;=
[&lt;span class=&quot;n&quot;&gt;Install&lt;/span&gt;]
&lt;span class=&quot;n&quot;&gt;WantedBy&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;-&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;apache-config&quot;&gt;Apache Config&lt;/h3&gt;
&lt;p&gt;In the following section, I use &lt;strong&gt;commento.jasonthai.me&lt;/strong&gt; as my subdomain to host Commento, you can just replace the it with whatever domain you will be using.&lt;/p&gt;

&lt;p&gt;Create a new file &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/apache2/sites-available/commento.jasonthai.me.conf:&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-apache highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;VirtualHost&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt; *:80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;
&lt;/span&gt;    &lt;span class=&quot;nc&quot;&gt;ServerAdmin&lt;/span&gt; webmaster@localhost
    &lt;span class=&quot;nc&quot;&gt;ServerName&lt;/span&gt; commento.jasonthai.me
    &lt;span class=&quot;nc&quot;&gt;ServerAlias&lt;/span&gt; commento.jasonthai.me
    &lt;span class=&quot;nc&quot;&gt;DocumentRoot&lt;/span&gt; /usr/share/commento

    &lt;span class=&quot;nc&quot;&gt;ProxyPreserveHost&lt;/span&gt; On
    &lt;span class=&quot;nc&quot;&gt;ProxyPass&lt;/span&gt; / http://127.0.0.1:8080/
    &lt;span class=&quot;nc&quot;&gt;ProxyPassReverse&lt;/span&gt; / http://127.0.0.1:8080/
&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;VirtualHost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Note: the above conf assumes you are not using any TLS/SSL certificates and we are exposing Commento through port 80 which is the default port you can access from your browser. If you choose to enable HTTPS for commento,  &lt;a href=&quot;https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-18-04&quot;&gt;follow this tutorial to enable HTTPS on your server&lt;/a&gt;. This will greatly enhance the security of your Commento service.&lt;/p&gt;

&lt;p&gt;After running &lt;code class=&quot;highlighter-rouge&quot;&gt;Letsencrypt certbot&lt;/code&gt;, the apache config will look something like this instead:&lt;/p&gt;
&lt;div class=&quot;language-apache highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;VirtualHost&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt; *:80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;RewriteEngine&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;on&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;RewriteCond&lt;/span&gt; %{SERVER_NAME} =commento.jasonthai.me
&lt;span class=&quot;nc&quot;&gt;RewriteRule&lt;/span&gt; ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;VirtualHost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;VirtualHost&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt; *:443&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;
&lt;/span&gt;    &lt;span class=&quot;nc&quot;&gt;ServerAdmin&lt;/span&gt; webmaster@localhost
    &lt;span class=&quot;nc&quot;&gt;ServerName&lt;/span&gt; commento.jasonthai.me
    &lt;span class=&quot;nc&quot;&gt;ServerAlias&lt;/span&gt; commento.jasonthai.me
    &lt;span class=&quot;nc&quot;&gt;DocumentRoot&lt;/span&gt; /usr/share/commento

    &lt;span class=&quot;nc&quot;&gt;ProxyPreserveHost&lt;/span&gt; On
    &lt;span class=&quot;nc&quot;&gt;ProxyPass&lt;/span&gt; / http://127.0.0.1:8080/
    &lt;span class=&quot;nc&quot;&gt;ProxyPassReverse&lt;/span&gt; / http://127.0.0.1:8080/

    &lt;span class=&quot;nc&quot;&gt;ErrorLog&lt;/span&gt; ${APACHE_LOG_DIR}/error.log
    &lt;span class=&quot;nc&quot;&gt;CustomLog&lt;/span&gt; ${APACHE_LOG_DIR}/access.log combined
&lt;span class=&quot;nc&quot;&gt;SSLCertificateFile&lt;/span&gt; /etc/letsencrypt/live/commento.jasonthai.me/fullchain.pem
&lt;span class=&quot;nc&quot;&gt;SSLCertificateKeyFile&lt;/span&gt; /etc/letsencrypt/live/commento.jasonthai.me/privkey.pem
&lt;span class=&quot;nc&quot;&gt;Include&lt;/span&gt; /etc/letsencrypt/options-ssl-apache.conf
&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;VirtualHost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;running-commento&quot;&gt;Running Commento&lt;/h3&gt;
&lt;p&gt;Run &lt;code class=&quot;highlighter-rouge&quot;&gt;systemctl start commento&lt;/code&gt; to start Commento service.&lt;/p&gt;

&lt;p&gt;Run &lt;code class=&quot;highlighter-rouge&quot;&gt;systemctl enable commento&lt;/code&gt; to enable Commento as a background service.&lt;/p&gt;

&lt;p&gt;Run &lt;code class=&quot;highlighter-rouge&quot;&gt;systemctl status commento&lt;/code&gt; to check the status of Commento.&lt;/p&gt;

&lt;p&gt;After setting everything up, you can go to the domain that you set up to access Commento. If it works, you’ll be greeted with something like this:&lt;/p&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/commento.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/commento.png&quot; alt=&quot;Commento&quot; /&gt;
&lt;/picture&gt;

&lt;h2 id=&quot;adding-commento-to-your-site&quot;&gt;Adding Commento to Your Site&lt;/h2&gt;
&lt;p&gt;Put this to where you want the comments to show up:&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;commento&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://YOUR-DOMAIN-HERE/js/commento.js&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You should be seeing something similar to my site if everything works correctly.&lt;/p&gt;

&lt;h2 id=&quot;resources&quot;&gt;Resources&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.commento.io/&quot;&gt;https://docs.commento.io&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://oct8l.gitlab.io/posts/2018/129/setting-up-commento-with-hugo/&quot;&gt;https://oct8l.gitlab.io/posts/2018/129/setting-up-commento-with-hugo/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/fidiego/commento-heroku&quot;&gt;https://github.com/fidiego/commento-heroku&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Jason Thai</name></author><category term="tech" /><category term="en" /><summary type="html">Introduction I recently switched from using Disqus comment system to Commento. The reason is that I am in favor of a non-tracking and lightweight system which Commento satisfies. This note will go over the steps to host Commento using Apache webserver. Prerequisites A few things you will need: A server. If you have not got one, I recommended using Digital Ocean. A $5 droplet is sufficient. A domain which has an A record pointing your domain to your server’s IP. For example, I have an A record that points my subdomain commento to my server’s IP so Commento is available on https://commento.jasonthai.me When you create a VPS, you will be asked which OS to install. I chose to use Ubuntu 18.04 as there are a lot of tutorials online for Ubuntu to help you get started. Setting up Commento Install Apache2 Follow this tutorial on Digital Ocean to help you get started setting up Apache. It contains all the necessary information to help you install Apache. Install PostgreSQL Follow this tutorial to install PostgreSQL on your VPS I chose to create a new user commento and database commento so that I can use it later. To allow the new user to access the database without any password, I made the following change to /etc/postgresql/10/main/pg_hba.conf: # TYPE DATABASE USER ADDRESS METHOD # &quot;local&quot; is for Unix domain socket connections only local all all trust &amp;lt;- by default it is ident which required password input I also made the following change to /etc/postgresql/10/main/postgresql.conf: // uncommented listen_addresses = 'localhost' # what IP address(es) to listen on; This is to allow using localhost as the default host for connecting to postgres database on the server. Installing Commento In the following section, I use commento.jasonthai.me as my subdomain to host Commento, you can just replace it with whatever domain you will be using Enter the following commands: wget https://commento-release.s3.amazonaws.com/commento-linux-amd64-v1.7.0.tar.gz mkdir /usr/share/commento tar xvf commento-linux-amd64-v1.7.0.tar.gz -C /usr/share/commento Create a new file /etc/systemd/system/commento.service: [Unit] Description=Commento daemon service After=network.target postgresql.service [Service] Type=simple ExecStart=/usr/bin/commento Environment=COMMENTO_ORIGIN=https://commento.jasonthai.me Environment=COMMENTO_PORT=8080 Environment=COMMENTO_POSTGRES=postgres://commento@localhost:5432/commento?sslmode=disable Environment=COMMENTO_STATIC=/usr/share/commento Environment=COMMENTO_FORBID_NEW_OWNERS=true Environment=COMMENTO_SMTP_HOST=ENTER YOUR VALUE HERE Environment=COMMENTO_SMTP_PORT=ENTER YOUR VALUE HERE Environment=COMMENTO_SMTP_USERNAME=ENTER YOUR VALUE HERE Environment=COMMENTO_SMTP_PASSWORD=ENTER YOUR VALUE HERE Environment=COMMENTO_SMTP_FROM_ADDRESS=no-reply@commento.io # Set Google OAuth credentials Environment=COMMENTO_GOOGLE_KEY= Environment=COMMENTO_GOOGLE_SECRET= # Set Github OAuth credentials Environment=COMMENTO_GITHUB_KEY= Environment=COMMENTO_GITHUB_SECRET= # Set Twitter OAuth credentials Environment=COMMENTO_TWITTER_KEY= Environment=COMMENTO_TWITTER_SECRET= [Install] WantedBy=multi-user.target Apache Config In the following section, I use commento.jasonthai.me as my subdomain to host Commento, you can just replace the it with whatever domain you will be using. Create a new file /etc/apache2/sites-available/commento.jasonthai.me.conf: &amp;lt;VirtualHost *:80&amp;gt; ServerAdmin webmaster@localhost ServerName commento.jasonthai.me ServerAlias commento.jasonthai.me DocumentRoot /usr/share/commento ProxyPreserveHost On ProxyPass / http://127.0.0.1:8080/ ProxyPassReverse / http://127.0.0.1:8080/ &amp;lt;/VirtualHost&amp;gt; Note: the above conf assumes you are not using any TLS/SSL certificates and we are exposing Commento through port 80 which is the default port you can access from your browser. If you choose to enable HTTPS for commento, follow this tutorial to enable HTTPS on your server. This will greatly enhance the security of your Commento service. After running Letsencrypt certbot, the apache config will look something like this instead: &amp;lt;VirtualHost *:80&amp;gt; RewriteEngine on RewriteCond %{SERVER_NAME} =commento.jasonthai.me RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent] &amp;lt;/VirtualHost&amp;gt; &amp;lt;VirtualHost *:443&amp;gt; ServerAdmin webmaster@localhost ServerName commento.jasonthai.me ServerAlias commento.jasonthai.me DocumentRoot /usr/share/commento ProxyPreserveHost On ProxyPass / http://127.0.0.1:8080/ ProxyPassReverse / http://127.0.0.1:8080/ ErrorLog ${APACHE_LOG_DIR}/error.log CustomLog ${APACHE_LOG_DIR}/access.log combined SSLCertificateFile /etc/letsencrypt/live/commento.jasonthai.me/fullchain.pem SSLCertificateKeyFile /etc/letsencrypt/live/commento.jasonthai.me/privkey.pem Include /etc/letsencrypt/options-ssl-apache.conf &amp;lt;/VirtualHost&amp;gt; Running Commento Run systemctl start commento to start Commento service. Run systemctl enable commento to enable Commento as a background service. Run systemctl status commento to check the status of Commento. After setting everything up, you can go to the domain that you set up to access Commento. If it works, you’ll be greeted with something like this: Adding Commento to Your Site Put this to where you want the comments to show up: &amp;lt;div id=&quot;commento&quot;&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;script defer src=&quot;https://YOUR-DOMAIN-HERE/js/commento.js&quot;&amp;gt; &amp;lt;/script&amp;gt; You should be seeing something similar to my site if everything works correctly. Resources https://docs.commento.io https://oct8l.gitlab.io/posts/2018/129/setting-up-commento-with-hugo/ https://github.com/fidiego/commento-heroku</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/commento-logo.png" /></entry><entry><title type="html">I Turned My Blog into a Progressive Web App</title><link href="https://jasonthai.me/blog/2019/08/07/i-turned-my-blog-into-a-web-progress-app/" rel="alternate" type="text/html" title="I Turned My Blog into a Progressive Web App" /><published>2019-08-07T00:00:00+00:00</published><updated>2019-08-07T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/08/07/i-turned-my-blog-into-a-web-progress-app</id><content type="html" xml:base="https://jasonthai.me/blog/2019/08/07/i-turned-my-blog-into-a-web-progress-app/">&lt;p&gt;I recently create a post of &lt;a href=&quot;https://jasonthai.me/blog/2019/08/06/enable-offline-support-to-websites-with-workbox/&quot;&gt;how to enable offline support to websites with Workbox&lt;/a&gt; and turns out it already covers half of the work of turning my blog into a progressive web app (PWA). This note will cover the rest to fully convert a regular website to a PWA.
&lt;!--more--&gt;&lt;/p&gt;

&lt;p&gt;The first thing is to check what is needed to be done in order to be a PWA. We can do that by using Google Chrome’s developer tools’ audit.&lt;/p&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/devtool-audits.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/devtool-audits.png&quot; alt=&quot;Dev Tool Audits&quot; /&gt;
&lt;/picture&gt;

&lt;p&gt;Give it a run, and see who well your website is doing.&lt;/p&gt;

&lt;p&gt;Now let’s dive in the steps to turn my blog to a PWA.&lt;/p&gt;

&lt;h2 id=&quot;prerequisites&quot;&gt;Prerequisites:&lt;/h2&gt;
&lt;p&gt;Make sure have completed registering the worker service. Details are covered in the post I mentioned above.&lt;/p&gt;

&lt;h2 id=&quot;create-manifestjson&quot;&gt;Create manifest.json&lt;/h2&gt;
&lt;p&gt;The &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/Manifest&quot;&gt;Web App Manifest&lt;/a&gt; is a JSON file designed to describe a Web Application. Below is what I declared for my site:&lt;/p&gt;
&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;short_name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Jason's Notes&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Jason's Notes&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;icons&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;src&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/assets/img/android-chrome-192x192.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;image/png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;sizes&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;192x192&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;src&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/assets/img/android-chrome-512x512.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;image/png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;sizes&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;512x512&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;start_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;index.html&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;background_color&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;#fdfdfd&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;display&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;standalone&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;scope&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;theme_color&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;#faf5ef&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Above are the minimum fields you should declare for your manifest. Make sure you fill all of them.&lt;/p&gt;

&lt;h2 id=&quot;add-meta-tags&quot;&gt;Add meta tags:&lt;/h2&gt;
&lt;p&gt;I also added the required meta tags for a PWA:&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;viewport&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;width=device-width, initial-scale=1&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;manifest&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/manifest.json&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apple-touch-icon&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/assets/img/apple-touch-icon.png&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;theme-color&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;#faf5ef&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;verify-through-audits&quot;&gt;Verify through Audits&lt;/h2&gt;
&lt;p&gt;If you have completed all the above steps, verify using the audits tool again and hopefully you’ll be greeted with this screen:&lt;/p&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/pwa.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/pwa.png&quot; alt=&quot;PWA&quot; /&gt;
&lt;/picture&gt;

&lt;h2 id=&quot;more-ways-to-verify&quot;&gt;More ways to verify&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;If you open the menu on chrome browser, you’ll see the option to install your pwa as an app on your desktop.&lt;/li&gt;
  &lt;li&gt;View the site on browser and you can be asked to add this site as an app.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Using PWA, we ensure our site is viewable no matter what network condition is. I hope you’ll be able to turn your site to a PWA to improve your visitors’ experience.&lt;/p&gt;</content><author><name>Jason Thai</name></author><category term="tech" /><category term="en" /><summary type="html">I recently create a post of how to enable offline support to websites with Workbox and turns out it already covers half of the work of turning my blog into a progressive web app (PWA). This note will cover the rest to fully convert a regular website to a PWA.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/pwa-logo.png" /></entry><entry><title type="html">Enable Offline Support to Websites with Workbox</title><link href="https://jasonthai.me/blog/2019/08/06/enable-offline-support-to-websites-with-workbox/" rel="alternate" type="text/html" title="Enable Offline Support to Websites with Workbox" /><published>2019-08-06T00:00:00+00:00</published><updated>2019-08-06T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/08/06/enable-offline-support-to-websites-with-workbox</id><content type="html" xml:base="https://jasonthai.me/blog/2019/08/06/enable-offline-support-to-websites-with-workbox/">&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/workbox.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/workbox.png&quot; alt=&quot;workbox&quot; /&gt;
&lt;/picture&gt;

&lt;p&gt;Recently I have added offline support for this blog using &lt;a href=&quot;https://developers.google.com/web/tools/workbox/&quot;&gt;Workbox&lt;/a&gt;. You can test this by going offline and then browsing my blog. This note gives a walkthrough of how I did it and summarizes my findings.
&lt;!--more--&gt;&lt;/p&gt;

&lt;h2 id=&quot;tldr&quot;&gt;TLDR&lt;/h2&gt;
&lt;p&gt;Steps to enable offline support:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Enable service worker&lt;/li&gt;
  &lt;li&gt;Create sw.js with
    &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;importScripts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;https://storage.googleapis.com/workbox-cdn/releases/4.3.1/workbox-sw.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;precaching&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;precacheAndRoute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Install workbox-cli with &lt;code class=&quot;highlighter-rouge&quot;&gt;npm install workbox-cli --global&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Follow workbox wizard &lt;code class=&quot;highlighter-rouge&quot;&gt;workbox wizard --injectManifest&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Inject &lt;code class=&quot;highlighter-rouge&quot;&gt;sw.js&lt;/code&gt; with what to cache &lt;code class=&quot;highlighter-rouge&quot;&gt;workbox injectManifest workbox-config.js&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;what-is-workbox&quot;&gt;What is Workbox?&lt;/h2&gt;
&lt;p&gt;Workbox is a set of javascript libraries that add support for caching and offline access of web apps. Workbox provides an abstract layer for developers when working with &lt;a href=&quot;https://developers.google.com/web/fundamentals/primers/service-workers/&quot;&gt;service workers&lt;/a&gt;. Some of the things workbox support like precaching, runtime caching, etc will be covered below.&lt;/p&gt;

&lt;p&gt;Does your browser support workbox and service workers? &lt;a href=&quot;https://love2dev.com/blog/what-browsers-support-service-workers/&quot;&gt;Check here&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;enable-service-worker&quot;&gt;Enable service worker&lt;/h2&gt;
&lt;p&gt;Add this script to the bottom of your website:&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Check that service workers are supported&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;serviceWorker&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;navigator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// Use the window load event to keep the page load performant&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;navigator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;serviceWorker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;/sw.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This tells the browser to wait until the window load and then register for service worker  in &lt;code class=&quot;highlighter-rouge&quot;&gt;/sw.js&lt;/code&gt; route.&lt;/p&gt;

&lt;h2 id=&quot;using-workbox&quot;&gt;Using Workbox&lt;/h2&gt;
&lt;p&gt;There are a few ways to generate service workers using Workbox. I choose to use workbox-cli as I can enable it as part of my build pipeline for my blog which is currently powered by Jekyll. If you use Node or Gulp, you can use &lt;a href=&quot;https://developers.google.com/web/tools/workbox/guides/precache-files/workbox-build&quot;&gt;workbox-build&lt;/a&gt; or if you use Webpack, there is &lt;a href=&quot;https://developers.google.com/web/tools/workbox/guides/precache-files/webpack&quot;&gt;workbox-webpack-plugin&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;install-workbox-cli&quot;&gt;Install workbox-cli&lt;/h3&gt;
&lt;p&gt;Install by using npm:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;npm install workbox-cli --global&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;setup-service-worker&quot;&gt;Setup service worker&lt;/h3&gt;
&lt;p&gt;In &lt;code class=&quot;highlighter-rouge&quot;&gt;sw.js&lt;/code&gt; specify the following boilerplate code:&lt;/p&gt;
&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;importScripts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;https://storage.googleapis.com/workbox-cdn/releases/4.3.1/workbox-sw.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;precaching&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;precacheAndRoute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([])&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Notice we have not specified anything yet to precache. This serves as an injection point for workbox to compute and inject all the routes to be cached.&lt;/p&gt;

&lt;h3 id=&quot;use-workbox-cli-to-populate-what-to-precache&quot;&gt;Use workbox-cli to populate what to precache&lt;/h3&gt;
&lt;p&gt;Run workbox-cli wizard&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;wizard&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;injectManifest&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This command provides the option to specify what to cache by looking at all the file extensions in the website. After this is done, a new file called &lt;code class=&quot;highlighter-rouge&quot;&gt;workbox-config.js&lt;/code&gt; will be created.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;injectManifest&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;js&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This command then uses what is specified in &lt;code class=&quot;highlighter-rouge&quot;&gt;workbox-config.js&lt;/code&gt; and injects all the files to be cached into the injection point we specified above in &lt;code class=&quot;highlighter-rouge&quot;&gt;sw.js&lt;/code&gt; files.&lt;/p&gt;

&lt;h3 id=&quot;manually-specify-what-to-cache-during-runtime&quot;&gt;Manually specify what to cache during runtime&lt;/h3&gt;
&lt;p&gt;There are already a few &lt;a href=&quot;https://developers.google.com/web/tools/workbox/guides/common-recipes&quot;&gt;common recipes&lt;/a&gt; that provide examples of caching css, js, images, etc.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jasonthai.me/sw.js&quot;&gt;I use a few from those recipes for my site&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Caching Images&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;routing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;registerRoute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;sr&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.(?:&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;png|gif|jpg|jpeg|webp|svg&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;$/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;strategies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;CacheFirst&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;cacheName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;images&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;plugins&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;expiration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Plugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;maxEntries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;maxAgeSeconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 30 Days&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}),&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// Cache CSS and JavaScript Files&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;routing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;registerRoute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;sr&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.(?:&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;js|css&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;$/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;strategies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;StaleWhileRevalidate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;cacheName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;static-resources&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// Caching Content from Multiple Origins&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;routing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;registerRoute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;sr&quot;&gt;/.*&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;(?:&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;googleapis|gstatic&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)\.&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;com/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;strategies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;StaleWhileRevalidate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;add-to-build-and-automate&quot;&gt;Add to build and automate&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://jasonthai.me/blog/2019/07/22/how-to-deploy-a-github-page-using-circleci-20-custom-jekyll-gems/&quot;&gt;Since I am using CircleCI to deploy changes of my site to Github Pages&lt;/a&gt;, I also add the workbox + service worker script generation to the build.&lt;/p&gt;

&lt;p&gt;Declared &lt;code class=&quot;highlighter-rouge&quot;&gt;workbox-config.js&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;globDirectory&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;_site/&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;globPatterns&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;**/*.{html,txt,css,webp,js,json,svg,ico}&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;swDest&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;_site/sw.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;swSrc&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;sw.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In &lt;code class=&quot;highlighter-rouge&quot;&gt;config.yml&lt;/code&gt; file I added:&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;      &lt;span class=&quot;c1&quot;&gt;# -- more omitted --&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;JEKYLL_ENV=production bundle exec jekyll build&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;npm install workbox-cli&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;npx workbox injectManifest workbox-config.js&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# -- more omitted --&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It is quite simple, just added two extra steps to install workbox-cli and run the same command to inject the precache routes.&lt;/p&gt;

&lt;h2 id=&quot;considerations&quot;&gt;Considerations&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Using the workbox-cli, we can cache everything on the site. However, this will not work if the website contains thousands of posts and images as everything will be downloaded to the browser cache.&lt;/li&gt;
  &lt;li&gt;Using the workbox-cli, we can only set service workers to cache our website’s assets. It will not handle caching other website’s sites. This is important because we probably use things like external fonts, javascripts, css files, etc. So we need to manually add that support to our service workers.&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Jason Thai</name></author><category term="tech" /><category term="en" /><summary type="html">Recently I have added offline support for this blog using Workbox. You can test this by going offline and then browsing my blog. This note gives a walkthrough of how I did it and summarizes my findings.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/workbox.png" /></entry><entry><title type="html">Three Proofs Total Stock Market is Efficient</title><link href="https://jasonthai.me/blog/2019/08/04/three-proofs-total-stock-market-is-efficient/" rel="alternate" type="text/html" title="Three Proofs Total Stock Market is Efficient" /><published>2019-08-04T00:00:00+00:00</published><updated>2019-08-04T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/08/04/three-proofs-total-stock-market-is-efficient</id><content type="html" xml:base="https://jasonthai.me/blog/2019/08/04/three-proofs-total-stock-market-is-efficient/">&lt;p&gt;John Norstad, a retired mathematician, had presented three proofs that prove Total Stock Market (fund) is efficient. This is interesting so this note shares with you those three proofs.
&lt;!--more--&gt;&lt;/p&gt;

&lt;p&gt;You can &lt;a href=&quot;https://web.archive.org/web/20170628202816/http://www.norstad.org/finance/tsmproofs.pdf&quot;&gt;read about the proofs here&lt;/a&gt; and  &lt;a href=&quot;https://www.bogleheads.org/forum/viewtopic.php?f=10&amp;amp;t=286828&quot;&gt;join the bogleheads forum to discuss about the proofs here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have recently switched to mostly investing in &lt;a href=&quot;https://investor.vanguard.com/mutual-funds/profile/vtsax&quot;&gt;Vanguard Total Stock Market Index Fund (VTSAX)&lt;/a&gt; so this study gives me some assurance that this is the right approach. Of course, stock market is volatile and risky, so imo, this only plays out if there is a long time horizon for investing.&lt;/p&gt;

&lt;p&gt;If you are wondering about the asset allocation that I am following, here is the breakdown:&lt;/p&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/asset-allocation.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/asset-allocation.png&quot; alt=&quot;Asset Allocation&quot; /&gt;
&lt;/picture&gt;

&lt;ul&gt;
  &lt;li&gt;401K: 100% &lt;a href=&quot;https://investor.vanguard.com/mutual-funds/profile/VFFVX&quot;&gt;Vanguard Target Retirement 2055 Fund (VFFVX)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Roth IRA:  100% &lt;a href=&quot;https://investor.vanguard.com/mutual-funds/profile/vtsax&quot;&gt;VTSAX&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Rollover IRA:  100% &lt;a href=&quot;https://investor.vanguard.com/mutual-funds/profile/vtsax&quot;&gt;VTSAX&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Taxable Account:  100% &lt;a href=&quot;https://investor.vanguard.com/mutual-funds/profile/vtsax&quot;&gt;VTSAX&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This portfolio seems to fit nicely with the approach of lazy investing as I do not have to worry about buying individual stocks and doing the due diligence to research about individual companies. You may argue stock picking can result in better investment over time but I think simplicity is the key to investing.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&quot;https://jasonthai.me/tags#finance&quot;&gt;Checkout some of my other finance’s notes&lt;/a&gt;&lt;/p&gt;</content><author><name>Jason Thai</name></author><category term="finance" /><category term="en" /><summary type="html">John Norstad, a retired mathematician, had presented three proofs that prove Total Stock Market (fund) is efficient. This is interesting so this note shares with you those three proofs.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/blur-chart-data.png" /></entry><entry><title type="html">What I’m up to in July 2019</title><link href="https://jasonthai.me/blog/2019/08/02/what-im-up-to-in-july-2019/" rel="alternate" type="text/html" title="What I'm up to in July 2019" /><published>2019-08-02T00:00:00+00:00</published><updated>2019-08-02T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/08/02/what-im-up-to-in-july-2019</id><content type="html" xml:base="https://jasonthai.me/blog/2019/08/02/what-im-up-to-in-july-2019/">&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/the-month-july.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/the-month-july.jpg&quot; alt=&quot;July&quot; /&gt;
&lt;/picture&gt;

&lt;p&gt;First post of what I am hoping will be a series. Here I will update what has been happening with me in the month.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;July has not been kind for Vy. She was sick for almost two weeks. This month was also our anniversary month. What a bummer! The good news is Vy is welcoming August with good health.&lt;/p&gt;

&lt;p&gt;I finally paid off my car loan! Some more stats:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Loan date: July 2014 to July 2019&lt;/li&gt;
  &lt;li&gt;Total amount: &lt;span style=&quot;color: green&quot;&gt;$2,000&lt;/span&gt; (down payment) + &lt;span style=&quot;color: green&quot;&gt;$28,168.33&lt;/span&gt; (0% finance) = &lt;span style=&quot;color: green&quot;&gt;$30,168.33&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;Current value: &lt;span style=&quot;color: green&quot;&gt;$12,831.00&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;Depreciation %: &lt;span style=&quot;color: red&quot;&gt;57.47%&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;My reading list heavily focused on personal finance this month. I got a lot of motivations to write a few of my posts based on these books. They are certainly good reads (pun-intended) so I recommend it to everyone.&lt;/p&gt;

&lt;!-- Show static HTML/CSS as a placeholder in case js is not enabled - javascript include will override this if things work --&gt;
&lt;style type=&quot;text/css&quot; media=&quot;screen&quot;&gt;
.gr_custom_container_1563424843 {
/* customize your Goodreads widget container here*/
border: 1px solid gray;
border-radius:10px;
padding: 10px 5px 10px 5px;
background-color: #FFFFFF;
color: #000000;
width: 300px
}
.gr_custom_header_1563424843 {
/* customize your Goodreads header here*/
border-bottom: 1px solid gray;
width: 100%;
margin-bottom: 5px;
text-align: center;
font-size: 120%
}
.gr_custom_each_container_1563424843 {
/* customize each individual book container here */
width: 100%;
clear: both;
margin-bottom: 10px;
overflow: auto;
padding-bottom: 4px;
border-bottom: 1px solid #aaa;
}
.gr_custom_book_container_1563424843 {
/* customize your book covers here */
overflow: hidden;
height: 60px;
float: left;
margin-right: 4px;
width: 39px;
}
.gr_custom_author_1563424843 {
/* customize your author names here */
font-size: 10px;
}
.gr_custom_tags_1563424843 {
/* customize your tags here */
font-size: 10px;
color: gray;
}
.gr_custom_rating_1563424843 {
/* customize your rating stars here */
float: right;
}
&lt;/style&gt;

&lt;div align=&quot;center&quot; id=&quot;gr_custom_widget_1563424843&quot;&gt;
    &lt;div class=&quot;gr_custom_container_1563424843&quot;&gt;
&lt;h2 class=&quot;gr_custom_header_1563424843&quot;&gt;
&lt;a style=&quot;text-decoration: none;&quot; rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/list/54938708-jason-thai?shelf=july-2019&amp;amp;utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;Jason&amp;#39;s bookshelf: july-2019&lt;/a&gt;
&lt;/h2&gt;
&lt;div class=&quot;gr_custom_each_container_1563424843&quot;&gt;
    &lt;div class=&quot;gr_custom_book_container_1563424843&quot;&gt;
      &lt;a title=&quot;The Simple Path to Wealth: Your road map to financial independence and a rich, free life&quot; rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/show/2849979605?utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;&lt;img alt=&quot;The Simple Path to Wealth: Your road map to financial independence and a rich, free life&quot; border=&quot;0&quot; src=&quot;https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1466299641l/30646587._SY75_.jpg&quot; /&gt;&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_rating_1563424843&quot;&gt;
      &lt;span class=&quot; staticStars notranslate&quot; title=&quot;it was amazing&quot;&gt;&lt;img alt=&quot;it was amazing&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_title_1563424843&quot;&gt;
      &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/show/2849979605?utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;The Simple Path to Wealth: Your road map to financial independence and a rich, free life&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_author_1563424843&quot;&gt;
      by &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/author/show/2936728.J_L_Collins&quot;&gt;J.L. Collins&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_tags_1563424843&quot;&gt;
      tagged:
      july-2019
    &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;gr_custom_each_container_1563424843&quot;&gt;
    &lt;div class=&quot;gr_custom_book_container_1563424843&quot;&gt;
      &lt;a title=&quot;The Millionaire Next Door: The Surprising Secrets of America's Wealthy&quot; rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/show/2854902772?utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;&lt;img alt=&quot;The Millionaire Next Door: The Surprising Secrets of America's Wealthy&quot; border=&quot;0&quot; src=&quot;https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1384821256l/18841345._SY75_.jpg&quot; /&gt;&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_rating_1563424843&quot;&gt;
      &lt;span class=&quot; staticStars notranslate&quot; title=&quot;really liked it&quot;&gt;&lt;img alt=&quot;really liked it&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_inactive.png&quot; /&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_title_1563424843&quot;&gt;
      &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/show/2854902772?utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;The Millionaire Next Door: The Surprising Secrets of America's Wealthy&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_author_1563424843&quot;&gt;
      by &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/author/show/659.Thomas_J_Stanley&quot;&gt;Thomas J. Stanley&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_tags_1563424843&quot;&gt;
      tagged:
      july-2019
    &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;gr_custom_each_container_1563424843&quot;&gt;
    &lt;div class=&quot;gr_custom_book_container_1563424843&quot;&gt;
      &lt;a title=&quot;Your Money or Your Life&quot; rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/show/2875598945?utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;&lt;img alt=&quot;Your Money or Your Life&quot; border=&quot;0&quot; src=&quot;https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1547451646l/43560266._SY75_.jpg&quot; /&gt;&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_rating_1563424843&quot;&gt;
      &lt;span class=&quot; staticStars notranslate&quot; title=&quot;it was amazing&quot;&gt;&lt;img alt=&quot;it was amazing&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_title_1563424843&quot;&gt;
      &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/show/2875598945?utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;Your Money or Your Life&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_author_1563424843&quot;&gt;
      by &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/author/show/44527.Vicki_Robin&quot;&gt;Vicki Robin&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_tags_1563424843&quot;&gt;
      tagged:
      july-2019
    &lt;/div&gt;
&lt;/div&gt;
&lt;br style=&quot;clear: both&quot; /&gt;
&lt;center&gt;
&lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/&quot;&gt;&lt;img alt=&quot;goodreads.com&quot; style=&quot;border:0&quot; src=&quot;https://www.goodreads.com/images/widget/widget_logo.gif&quot; /&gt;&lt;/a&gt;
&lt;/center&gt;
&lt;noscript&gt;
Share &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/&quot;&gt;book reviews&lt;/a&gt; and ratings with Jason, and even join a &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/group&quot;&gt;book club&lt;/a&gt; on Goodreads.
&lt;/noscript&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;script src=&quot;https://www.goodreads.com/review/custom_widget/54938708.Jason's%20bookshelf:%20july-2019?cover_position=left&amp;amp;cover_size=small&amp;amp;num_books=5&amp;amp;order=a&amp;amp;shelf=july-2019&amp;amp;show_author=1&amp;amp;show_cover=1&amp;amp;show_rating=1&amp;amp;show_review=1&amp;amp;show_tags=1&amp;amp;show_title=1&amp;amp;sort=date_added&amp;amp;widget_bg_color=FFFFFF&amp;amp;widget_bg_transparent=&amp;amp;widget_border_width=1&amp;amp;widget_id=1563424843&amp;amp;widget_text_color=000000&amp;amp;widget_title_size=medium&amp;amp;widget_width=medium&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;I also ran my first half marathon. You can view more detail about it in this &lt;a href=&quot;/blog/2019/07/28/42nd-biofreeze-sf-marathon-1st-half/&quot;&gt;post&lt;/a&gt;&lt;/p&gt;</content><author><name>Jason Thai</name></author><category term="blog" /><category term="en" /><summary type="html">First post of what I am hoping will be a series. Here I will update what has been happening with me in the month.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/the-month-july.jpg" /></entry><entry><title type="html">42nd Biofreeze SF Marathon - 1st Half</title><link href="https://jasonthai.me/blog/2019/07/28/42nd-biofreeze-sf-marathon-1st-half/" rel="alternate" type="text/html" title="42nd Biofreeze SF Marathon - 1st Half" /><published>2019-07-28T00:00:00+00:00</published><updated>2019-07-28T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/07/28/42nd-biofreeze-sf-marathon-1st-half</id><content type="html" xml:base="https://jasonthai.me/blog/2019/07/28/42nd-biofreeze-sf-marathon-1st-half/">&lt;p&gt;I finally ran my first half marathon today 07-28-19 in &lt;a href=&quot;https://www.thesfmarathon.com/&quot;&gt;The 42nd Biofreeze SF Marathon&lt;/a&gt;. This has been one of my goals of the year. Suffice to say it has been one of the best day of my life so far. Here is the result of my race:&lt;/p&gt;

&lt;picture&gt;
    &lt;source srcset=&quot;https://jasonthai.me/assets/img/half-marathon.webp&quot; type=&quot;image/webp&quot; /&gt;
    &lt;img class=&quot;db ml-auto mr-auto&quot; src=&quot;https://jasonthai.me/assets/img/half-marathon.png&quot; alt=&quot;half marathon result&quot; /&gt;
&lt;/picture&gt;

&lt;p&gt;Race Report:&lt;/p&gt;

&lt;p&gt;The race started at 6:46 AM at &lt;a href=&quot;https://www.google.com/maps/place/USA/@37.793712,-122.3926053,17z/data=!3m1!4b1!4m2!3m1!1s0x80858065c94cb613:0x1471cf17c56982b1&quot;&gt;Mission Street and The Embarcadero San Francisco&lt;/a&gt;
As soon as I started running, the adrenaline kicked in and I felt I could run faster than normal. However I still tried to keep a pace around 9 minutes / mile.  There were around 6 water stops along the race and I stopped by all of them and refueled with eletrolyte water. The first uphill around half of the race was longer and higher than expected so I was conservative in my pace and slowed down to about 13:30 minutes / mile. Following that was a long downhill which helped me recover my pace, however that had a bad affect on my ankle. Later on, I had to stop by the medic to apply some pain relief gel. This is a surprise to me as the water does provide instant energy and I felt I could run fast again right after drinking. Also I did not have to drink as much as usual. My legs start hurting quite a lot at around 10 mile in, which meant stopping by the medic again for the gel. They seemed to have instant effect but wore off quickly.  I think I could have pushed myself harder in the last 2 miles of the race. In stead I kept conserving energy and when I finished, I didn’t feel as tired as my practice run that I did a few weeks ago.&lt;/p&gt;

&lt;p&gt;Some other stats about my training journey:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Training duration: 8 weeks&lt;/li&gt;
  &lt;li&gt;Number of running hours: 24&lt;/li&gt;
  &lt;li&gt;Number of miles: 145&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;From not being able to run much from February this year, it has been a good journey so far. Ever since I found out about &lt;a href=&quot;https://www.strava.com/athletes/39726096&quot;&gt;Strava&lt;/a&gt;, it has been the source of motivation to get me running. There are a lot of runners out there and seeing how they push themselves everyday to run harder and faster is truly wonderful. I am glad to join the running club and hoping to continue for a long time. Also thank you to my friend Tri Hoang for pushing me, it is good to have a running buddy.&lt;/p&gt;

&lt;p&gt;If you want to get started in running, I suggest checking out &lt;a href=&quot;https://www.c25k.com/&quot;&gt;Couch 2 5K Program&lt;/a&gt;. This will help guide you along the way from not running to your first 5K. Get out there and start running!&lt;/p&gt;</content><author><name>Jason Thai</name></author><category term="blog" /><category term="en" /><summary type="html">I finally ran my first half marathon today 07-28-19 in The 42nd Biofreeze SF Marathon. This has been one of my goals of the year. Suffice to say it has been one of the best day of my life so far. Here is the result of my race: Race Report: The race started at 6:46 AM at Mission Street and The Embarcadero San Francisco As soon as I started running, the adrenaline kicked in and I felt I could run faster than normal. However I still tried to keep a pace around 9 minutes / mile. There were around 6 water stops along the race and I stopped by all of them and refueled with eletrolyte water. The first uphill around half of the race was longer and higher than expected so I was conservative in my pace and slowed down to about 13:30 minutes / mile. Following that was a long downhill which helped me recover my pace, however that had a bad affect on my ankle. Later on, I had to stop by the medic to apply some pain relief gel. This is a surprise to me as the water does provide instant energy and I felt I could run fast again right after drinking. Also I did not have to drink as much as usual. My legs start hurting quite a lot at around 10 mile in, which meant stopping by the medic again for the gel. They seemed to have instant effect but wore off quickly. I think I could have pushed myself harder in the last 2 miles of the race. In stead I kept conserving energy and when I finished, I didn’t feel as tired as my practice run that I did a few weeks ago. Some other stats about my training journey: Training duration: 8 weeks Number of running hours: 24 Number of miles: 145 From not being able to run much from February this year, it has been a good journey so far. Ever since I found out about Strava, it has been the source of motivation to get me running. There are a lot of runners out there and seeing how they push themselves everyday to run harder and faster is truly wonderful. I am glad to join the running club and hoping to continue for a long time. Also thank you to my friend Tri Hoang for pushing me, it is good to have a running buddy. If you want to get started in running, I suggest checking out Couch 2 5K Program. This will help guide you along the way from not running to your first 5K. Get out there and start running!</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/half-marathon-cover.png" /></entry></feed>