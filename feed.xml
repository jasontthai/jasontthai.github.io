<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.6">Jekyll</generator><link href="https://jasonthai.me/feed.xml" rel="self" type="application/atom+xml" /><link href="https://jasonthai.me/" rel="alternate" type="text/html" /><updated>2019-08-14T00:07:30+00:00</updated><id>https://jasonthai.me/feed.xml</id><title type="html">Jason’s Notes</title><subtitle>Jason Thai's personal page</subtitle><author><name>Jason Thai</name></author><entry><title type="html">How to host Commento on Apache Webserver</title><link href="https://jasonthai.me/blog/2019/08/12/how-to-host-commento-on-apache-webserver/" rel="alternate" type="text/html" title="How to host Commento on Apache Webserver" /><published>2019-08-12T00:00:00+00:00</published><updated>2019-08-12T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/08/12/how-to-host-commento-on-apache-webserver</id><content type="html" xml:base="https://jasonthai.me/blog/2019/08/12/how-to-host-commento-on-apache-webserver/">&lt;p&gt;&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/commento-logo.webp&quot; alt=&quot;Commento Logo&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;
&lt;p&gt;I recently switched from using Disqus comment system to Commento. The reason is that I am in favor of a non-tracking and lightweight system which Commento satisfies. This note will go over the steps to host Commento using Apache webserver.&lt;/p&gt;

&lt;h2 id=&quot;prerequisites&quot;&gt;Prerequisites&lt;/h2&gt;
&lt;p&gt;A few things you will need:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;A server. If you have not got one, I recommended using &lt;a href=&quot;https://m.do.co/c/c544762f5c36&quot;&gt;Digital Ocean&lt;/a&gt;. A $5 droplet is sufficient.&lt;/li&gt;
  &lt;li&gt;A domain which has an A record pointing your domain to your server’s IP. For example, I have an A record that points my subdomain &lt;code class=&quot;highlighter-rouge&quot;&gt;commento&lt;/code&gt; to my server’s IP so Commento is available on &lt;a href=&quot;https://commento.jasonthai.me&quot;&gt;https://commento.jasonthai.me&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;When you create a VPS, you will be asked which OS to install. I chose to use Ubuntu 18.04 as there are a lot of tutorials online for Ubuntu to help you get started.&lt;/p&gt;

&lt;h2 id=&quot;setting-up-commento&quot;&gt;Setting up Commento&lt;/h2&gt;
&lt;h3 id=&quot;install-apache2&quot;&gt;Install Apache2&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://www.digitalocean.com/community/tutorials/how-to-install-the-apache-web-server-on-ubuntu-18-04-quickstart&quot;&gt;Follow this tutorial on Digital Ocean to help you get started setting up Apache&lt;/a&gt;.
It contains all the necessary information to help you install Apache.&lt;/p&gt;

&lt;h3 id=&quot;install-postgresql&quot;&gt;Install PostgreSQL&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://www.digitalocean.com/community/tutorials/how-to-install-and-use-postgresql-on-ubuntu-18-04&quot;&gt;Follow this tutorial to install PostgreSQL on your VPS&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I chose to create a new user &lt;code class=&quot;highlighter-rouge&quot;&gt;commento&lt;/code&gt; and database &lt;code class=&quot;highlighter-rouge&quot;&gt;commento&lt;/code&gt; so that I can use it later.&lt;/p&gt;

&lt;p&gt;To allow the new user to access the database without any password, I made the following change to &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/postgresql/10/main/pg_hba.conf&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# TYPE  DATABASE        USER            ADDRESS                 METHOD

# &quot;local&quot; is for Unix domain socket connections only
local   all             all                                     trust &amp;lt;- by default it is ident which required password input
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I also made the following change to &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/postgresql/10/main/postgresql.conf&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// uncommented
listen_addresses = 'localhost'        # what IP address(es) to listen on;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is to allow using &lt;code class=&quot;highlighter-rouge&quot;&gt;localhost&lt;/code&gt; as the default host for connecting to postgres database on the server.&lt;/p&gt;

&lt;h3 id=&quot;installing-commento&quot;&gt;Installing Commento&lt;/h3&gt;
&lt;p&gt;In the following section, I use &lt;strong&gt;commento.jasonthai.me&lt;/strong&gt; as my subdomain to host Commento, you can just replace it with whatever domain you will be using&lt;/p&gt;

&lt;p&gt;Enter the following commands:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;wget https://commento-release.s3.amazonaws.com/commento-linux-amd64-v1.7.0.tar.gz&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;mkdir /usr/share/commento&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;tar xvf commento-linux-amd64-v1.7.0.tar.gz -C /usr/share/commento&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Create a new file &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/systemd/system/commento.service&lt;/code&gt;:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-conf highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[&lt;span class=&quot;n&quot;&gt;Unit&lt;/span&gt;]
&lt;span class=&quot;n&quot;&gt;Description&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;Commento&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;daemon&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;service&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;After&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;network&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;postgresql&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;service&lt;/span&gt;

[&lt;span class=&quot;n&quot;&gt;Service&lt;/span&gt;]
&lt;span class=&quot;n&quot;&gt;Type&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;simple&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ExecStart&lt;/span&gt;=/&lt;span class=&quot;n&quot;&gt;usr&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;bin&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;commento&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_ORIGIN&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;https&lt;/span&gt;://&lt;span class=&quot;n&quot;&gt;commento&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;jasonthai&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;me&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_PORT&lt;/span&gt;=&lt;span class=&quot;m&quot;&gt;8080&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_POSTGRES&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;postgres&lt;/span&gt;://&lt;span class=&quot;n&quot;&gt;commento&lt;/span&gt;@&lt;span class=&quot;n&quot;&gt;localhost&lt;/span&gt;:&lt;span class=&quot;m&quot;&gt;5432&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;commento&lt;/span&gt;?&lt;span class=&quot;n&quot;&gt;sslmode&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;disable&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_STATIC&lt;/span&gt;=/&lt;span class=&quot;n&quot;&gt;usr&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;share&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;commento&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_FORBID_NEW_OWNERS&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;true&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_SMTP_HOST&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;ENTER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;YOUR&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;VALUE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HERE&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_SMTP_PORT&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;ENTER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;YOUR&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;VALUE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HERE&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_SMTP_USERNAME&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;ENTER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;YOUR&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;VALUE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HERE&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_SMTP_PASSWORD&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;ENTER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;YOUR&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;VALUE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HERE&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_SMTP_FROM_ADDRESS&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;no&lt;/span&gt;-&lt;span class=&quot;n&quot;&gt;reply&lt;/span&gt;@&lt;span class=&quot;n&quot;&gt;commento&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;io&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Set Google OAuth credentials
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_GOOGLE_KEY&lt;/span&gt;=
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_GOOGLE_SECRET&lt;/span&gt;=

&lt;span class=&quot;c&quot;&gt;# Set Github OAuth credentials
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_GITHUB_KEY&lt;/span&gt;=
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_GITHUB_SECRET&lt;/span&gt;=

&lt;span class=&quot;c&quot;&gt;# Set Twitter OAuth credentials
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_TWITTER_KEY&lt;/span&gt;=
&lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;COMMENTO_TWITTER_SECRET&lt;/span&gt;=
[&lt;span class=&quot;n&quot;&gt;Install&lt;/span&gt;]
&lt;span class=&quot;n&quot;&gt;WantedBy&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;-&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;apache-config&quot;&gt;Apache Config&lt;/h3&gt;
&lt;p&gt;In the following section, I use &lt;strong&gt;commento.jasonthai.me&lt;/strong&gt; as my subdomain to host Commento, you can just replace the it with whatever domain you will be using.&lt;/p&gt;

&lt;p&gt;Create a new file &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/apache2/sites-available/commento.jasonthai.me.conf:&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-apache highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;VirtualHost&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt; *:80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;
&lt;/span&gt;    &lt;span class=&quot;nc&quot;&gt;ServerAdmin&lt;/span&gt; webmaster@localhost
    &lt;span class=&quot;nc&quot;&gt;ServerName&lt;/span&gt; commento.jasonthai.me
    &lt;span class=&quot;nc&quot;&gt;ServerAlias&lt;/span&gt; commento.jasonthai.me
    &lt;span class=&quot;nc&quot;&gt;DocumentRoot&lt;/span&gt; /usr/share/commento

    &lt;span class=&quot;nc&quot;&gt;ProxyPreserveHost&lt;/span&gt; On
    &lt;span class=&quot;nc&quot;&gt;ProxyPass&lt;/span&gt; / http://127.0.0.1:8080/
    &lt;span class=&quot;nc&quot;&gt;ProxyPassReverse&lt;/span&gt; / http://127.0.0.1:8080/
&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;VirtualHost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Note: the above conf assumes you are not using any TLS/SSL certificates and we are exposing Commento through port 80 which is the default port you can access from your browser. If you choose to enable HTTPS for commento,  &lt;a href=&quot;https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-18-04&quot;&gt;follow this tutorial to enable HTTPS on your server&lt;/a&gt;. This will greatly enhance the security of your Commento service.&lt;/p&gt;

&lt;p&gt;After running &lt;code class=&quot;highlighter-rouge&quot;&gt;Letsencrypt certbot&lt;/code&gt;, the apache config will look something like this instead:&lt;/p&gt;
&lt;div class=&quot;language-apache highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;VirtualHost&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt; *:80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;RewriteEngine&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;on&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;RewriteCond&lt;/span&gt; %{SERVER_NAME} =commento.jasonthai.me
&lt;span class=&quot;nc&quot;&gt;RewriteRule&lt;/span&gt; ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;VirtualHost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;VirtualHost&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt; *:443&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;
&lt;/span&gt;    &lt;span class=&quot;nc&quot;&gt;ServerAdmin&lt;/span&gt; webmaster@localhost
    &lt;span class=&quot;nc&quot;&gt;ServerName&lt;/span&gt; commento.jasonthai.me
    &lt;span class=&quot;nc&quot;&gt;ServerAlias&lt;/span&gt; commento.jasonthai.me
    &lt;span class=&quot;nc&quot;&gt;DocumentRoot&lt;/span&gt; /usr/share/commento

    &lt;span class=&quot;nc&quot;&gt;ProxyPreserveHost&lt;/span&gt; On
    &lt;span class=&quot;nc&quot;&gt;ProxyPass&lt;/span&gt; / http://127.0.0.1:8080/
    &lt;span class=&quot;nc&quot;&gt;ProxyPassReverse&lt;/span&gt; / http://127.0.0.1:8080/

    &lt;span class=&quot;nc&quot;&gt;ErrorLog&lt;/span&gt; ${APACHE_LOG_DIR}/error.log
    &lt;span class=&quot;nc&quot;&gt;CustomLog&lt;/span&gt; ${APACHE_LOG_DIR}/access.log combined
&lt;span class=&quot;nc&quot;&gt;SSLCertificateFile&lt;/span&gt; /etc/letsencrypt/live/commento.jasonthai.me/fullchain.pem
&lt;span class=&quot;nc&quot;&gt;SSLCertificateKeyFile&lt;/span&gt; /etc/letsencrypt/live/commento.jasonthai.me/privkey.pem
&lt;span class=&quot;nc&quot;&gt;Include&lt;/span&gt; /etc/letsencrypt/options-ssl-apache.conf
&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;VirtualHost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;running-commento&quot;&gt;Running Commento&lt;/h3&gt;
&lt;p&gt;Run &lt;code class=&quot;highlighter-rouge&quot;&gt;systemctl start commento&lt;/code&gt; to start Commento service.&lt;/p&gt;

&lt;p&gt;Run &lt;code class=&quot;highlighter-rouge&quot;&gt;systemctl enable commento&lt;/code&gt; to enable Commento as a background service.&lt;/p&gt;

&lt;p&gt;Run &lt;code class=&quot;highlighter-rouge&quot;&gt;systemctl status commento&lt;/code&gt; to check the status of Commento.&lt;/p&gt;

&lt;p&gt;After setting everything up, you can go to the domain that you set up to access Commento. If it works, you’ll be greeted with something like this:&lt;/p&gt;

&lt;p&gt;&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/commento.webp&quot; alt=&quot;Commento&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;adding-commento-to-your-site&quot;&gt;Adding Commento to Your Site&lt;/h2&gt;
&lt;p&gt;Put this to where you want the comments to show up:&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;commento&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://YOUR-DOMAIN-HERE/js/commento.js&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You should be seeing something similar to my site if everything works correctly.&lt;/p&gt;

&lt;h2 id=&quot;resources&quot;&gt;Resources&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.commento.io/&quot;&gt;https://docs.commento.io&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://oct8l.gitlab.io/posts/2018/129/setting-up-commento-with-hugo/&quot;&gt;https://oct8l.gitlab.io/posts/2018/129/setting-up-commento-with-hugo/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/fidiego/commento-heroku&quot;&gt;https://github.com/fidiego/commento-heroku&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Jason Thai</name></author><category term="tech" /><category term="en" /><summary type="html">Introduction I recently switched from using Disqus comment system to Commento. The reason is that I am in favor of a non-tracking and lightweight system which Commento satisfies. This note will go over the steps to host Commento using Apache webserver. Prerequisites A few things you will need: A server. If you have not got one, I recommended using Digital Ocean. A $5 droplet is sufficient. A domain which has an A record pointing your domain to your server’s IP. For example, I have an A record that points my subdomain commento to my server’s IP so Commento is available on https://commento.jasonthai.me When you create a VPS, you will be asked which OS to install. I chose to use Ubuntu 18.04 as there are a lot of tutorials online for Ubuntu to help you get started. Setting up Commento Install Apache2 Follow this tutorial on Digital Ocean to help you get started setting up Apache. It contains all the necessary information to help you install Apache. Install PostgreSQL Follow this tutorial to install PostgreSQL on your VPS I chose to create a new user commento and database commento so that I can use it later. To allow the new user to access the database without any password, I made the following change to /etc/postgresql/10/main/pg_hba.conf: # TYPE DATABASE USER ADDRESS METHOD # &quot;local&quot; is for Unix domain socket connections only local all all trust &amp;lt;- by default it is ident which required password input I also made the following change to /etc/postgresql/10/main/postgresql.conf: // uncommented listen_addresses = 'localhost' # what IP address(es) to listen on; This is to allow using localhost as the default host for connecting to postgres database on the server. Installing Commento In the following section, I use commento.jasonthai.me as my subdomain to host Commento, you can just replace it with whatever domain you will be using Enter the following commands: wget https://commento-release.s3.amazonaws.com/commento-linux-amd64-v1.7.0.tar.gz mkdir /usr/share/commento tar xvf commento-linux-amd64-v1.7.0.tar.gz -C /usr/share/commento Create a new file /etc/systemd/system/commento.service: [Unit] Description=Commento daemon service After=network.target postgresql.service [Service] Type=simple ExecStart=/usr/bin/commento Environment=COMMENTO_ORIGIN=https://commento.jasonthai.me Environment=COMMENTO_PORT=8080 Environment=COMMENTO_POSTGRES=postgres://commento@localhost:5432/commento?sslmode=disable Environment=COMMENTO_STATIC=/usr/share/commento Environment=COMMENTO_FORBID_NEW_OWNERS=true Environment=COMMENTO_SMTP_HOST=ENTER YOUR VALUE HERE Environment=COMMENTO_SMTP_PORT=ENTER YOUR VALUE HERE Environment=COMMENTO_SMTP_USERNAME=ENTER YOUR VALUE HERE Environment=COMMENTO_SMTP_PASSWORD=ENTER YOUR VALUE HERE Environment=COMMENTO_SMTP_FROM_ADDRESS=no-reply@commento.io # Set Google OAuth credentials Environment=COMMENTO_GOOGLE_KEY= Environment=COMMENTO_GOOGLE_SECRET= # Set Github OAuth credentials Environment=COMMENTO_GITHUB_KEY= Environment=COMMENTO_GITHUB_SECRET= # Set Twitter OAuth credentials Environment=COMMENTO_TWITTER_KEY= Environment=COMMENTO_TWITTER_SECRET= [Install] WantedBy=multi-user.target Apache Config In the following section, I use commento.jasonthai.me as my subdomain to host Commento, you can just replace the it with whatever domain you will be using. Create a new file /etc/apache2/sites-available/commento.jasonthai.me.conf: &amp;lt;VirtualHost *:80&amp;gt; ServerAdmin webmaster@localhost ServerName commento.jasonthai.me ServerAlias commento.jasonthai.me DocumentRoot /usr/share/commento ProxyPreserveHost On ProxyPass / http://127.0.0.1:8080/ ProxyPassReverse / http://127.0.0.1:8080/ &amp;lt;/VirtualHost&amp;gt; Note: the above conf assumes you are not using any TLS/SSL certificates and we are exposing Commento through port 80 which is the default port you can access from your browser. If you choose to enable HTTPS for commento, follow this tutorial to enable HTTPS on your server. This will greatly enhance the security of your Commento service. After running Letsencrypt certbot, the apache config will look something like this instead: &amp;lt;VirtualHost *:80&amp;gt; RewriteEngine on RewriteCond %{SERVER_NAME} =commento.jasonthai.me RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent] &amp;lt;/VirtualHost&amp;gt; &amp;lt;VirtualHost *:443&amp;gt; ServerAdmin webmaster@localhost ServerName commento.jasonthai.me ServerAlias commento.jasonthai.me DocumentRoot /usr/share/commento ProxyPreserveHost On ProxyPass / http://127.0.0.1:8080/ ProxyPassReverse / http://127.0.0.1:8080/ ErrorLog ${APACHE_LOG_DIR}/error.log CustomLog ${APACHE_LOG_DIR}/access.log combined SSLCertificateFile /etc/letsencrypt/live/commento.jasonthai.me/fullchain.pem SSLCertificateKeyFile /etc/letsencrypt/live/commento.jasonthai.me/privkey.pem Include /etc/letsencrypt/options-ssl-apache.conf &amp;lt;/VirtualHost&amp;gt; Running Commento Run systemctl start commento to start Commento service. Run systemctl enable commento to enable Commento as a background service. Run systemctl status commento to check the status of Commento. After setting everything up, you can go to the domain that you set up to access Commento. If it works, you’ll be greeted with something like this: Adding Commento to Your Site Put this to where you want the comments to show up: &amp;lt;div id=&quot;commento&quot;&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;script defer src=&quot;https://YOUR-DOMAIN-HERE/js/commento.js&quot;&amp;gt; &amp;lt;/script&amp;gt; You should be seeing something similar to my site if everything works correctly. Resources https://docs.commento.io https://oct8l.gitlab.io/posts/2018/129/setting-up-commento-with-hugo/ https://github.com/fidiego/commento-heroku</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/commento-logo.webp" /></entry><entry><title type="html">I Turned My Blog into a Progressive Web App</title><link href="https://jasonthai.me/blog/2019/08/07/i-turned-my-blog-into-a-web-progress-app/" rel="alternate" type="text/html" title="I Turned My Blog into a Progressive Web App" /><published>2019-08-07T00:00:00+00:00</published><updated>2019-08-07T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/08/07/i-turned-my-blog-into-a-web-progress-app</id><content type="html" xml:base="https://jasonthai.me/blog/2019/08/07/i-turned-my-blog-into-a-web-progress-app/">&lt;p&gt;I recently create a post of &lt;a href=&quot;https://jasonthai.me/blog/2019/08/06/enable-offline-support-to-websites-with-workbox/&quot;&gt;how to enable offline support to websites with Workbox&lt;/a&gt; and turns out it already covers half of the work of turning my blog into a progressive web app (PWA). This note will cover the rest to fully convert a regular website to a PWA.
&lt;!--more--&gt;&lt;/p&gt;

&lt;p&gt;The first thing is to check what is needed to be done in order to be a PWA. We can do that by using Google Chrome’s developer tools’ audit.&lt;/p&gt;

&lt;p&gt;&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/devtool-audits.webp&quot; alt=&quot;Dev Tool Audits&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Give it a run, and see who well your website is doing.&lt;/p&gt;

&lt;p&gt;Now let’s dive in the steps to turn my blog to a PWA.&lt;/p&gt;

&lt;h2 id=&quot;prerequisites&quot;&gt;Prerequisites:&lt;/h2&gt;
&lt;p&gt;Make sure have completed registering the worker service. Details are covered in the post I mentioned above.&lt;/p&gt;

&lt;h2 id=&quot;create-manifestjson&quot;&gt;Create manifest.json&lt;/h2&gt;
&lt;p&gt;The &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/Manifest&quot;&gt;Web App Manifest&lt;/a&gt; is a JSON file designed to describe a Web Application. Below is what I declared for my site:&lt;/p&gt;
&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;short_name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Jason's Notes&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Jason's Notes&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;icons&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;src&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/assets/img/android-chrome-192x192.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;image/png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;sizes&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;192x192&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;src&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/assets/img/android-chrome-512x512.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;image/png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;sizes&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;512x512&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;start_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;index.html&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;background_color&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;#fdfdfd&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;display&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;standalone&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;scope&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;theme_color&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;#faf5ef&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Above are the minimum fields you should declare for your manifest. Make sure you fill all of them.&lt;/p&gt;

&lt;h2 id=&quot;add-meta-tags&quot;&gt;Add meta tags:&lt;/h2&gt;
&lt;p&gt;I also added the required meta tags for a PWA:&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;viewport&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;width=device-width, initial-scale=1&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;manifest&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/manifest.json&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apple-touch-icon&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/assets/img/apple-touch-icon.png&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;theme-color&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;#faf5ef&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;verify-through-audits&quot;&gt;Verify through Audits&lt;/h2&gt;
&lt;p&gt;If you have completed all the above steps, verify using the audits tool again and hopefully you’ll be greeted with this screen:&lt;/p&gt;

&lt;p&gt;&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/pwa.webp&quot; alt=&quot;PWA&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;more-ways-to-verify&quot;&gt;More ways to verify&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;If you open the menu on chrome browser, you’ll see the option to install your pwa as an app on your desktop.&lt;/li&gt;
  &lt;li&gt;View the site on browser and you can be asked to add this site as an app.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Using PWA, we ensure our site is viewable no matter what network condition is. I hope you’ll be able to turn your site to a PWA to improve your visitors’ experience.&lt;/p&gt;</content><author><name>Jason Thai</name></author><category term="tech" /><category term="en" /><summary type="html">I recently create a post of how to enable offline support to websites with Workbox and turns out it already covers half of the work of turning my blog into a progressive web app (PWA). This note will cover the rest to fully convert a regular website to a PWA.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/pwa-logo.webp" /></entry><entry><title type="html">Enable Offline Support to Websites with Workbox</title><link href="https://jasonthai.me/blog/2019/08/06/enable-offline-support-to-websites-with-workbox/" rel="alternate" type="text/html" title="Enable Offline Support to Websites with Workbox" /><published>2019-08-06T00:00:00+00:00</published><updated>2019-08-06T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/08/06/enable-offline-support-to-websites-with-workbox</id><content type="html" xml:base="https://jasonthai.me/blog/2019/08/06/enable-offline-support-to-websites-with-workbox/">&lt;p&gt;&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/workbox.webp&quot; alt=&quot;workbox&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Recently I have added offline support for this blog using &lt;a href=&quot;https://developers.google.com/web/tools/workbox/&quot;&gt;Workbox&lt;/a&gt;. You can test this by going offline and then browsing my blog. This note gives a walkthrough of how I did it and summarizes my findings.
&lt;!--more--&gt;&lt;/p&gt;

&lt;h2 id=&quot;tldr&quot;&gt;TLDR&lt;/h2&gt;
&lt;p&gt;Steps to enable offline support:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Enable service worker&lt;/li&gt;
  &lt;li&gt;Create sw.js with
    &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;importScripts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;https://storage.googleapis.com/workbox-cdn/releases/4.3.1/workbox-sw.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;precaching&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;precacheAndRoute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Install workbox-cli with &lt;code class=&quot;highlighter-rouge&quot;&gt;npm install workbox-cli --global&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Follow workbox wizard &lt;code class=&quot;highlighter-rouge&quot;&gt;workbox wizard --injectManifest&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Inject &lt;code class=&quot;highlighter-rouge&quot;&gt;sw.js&lt;/code&gt; with what to cache &lt;code class=&quot;highlighter-rouge&quot;&gt;workbox injectManifest workbox-config.js&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;what-is-workbox&quot;&gt;What is Workbox?&lt;/h2&gt;
&lt;p&gt;Workbox is a set of javascript libraries that add support for caching and offline access of web apps. Workbox provides an abstract layer for developers when working with &lt;a href=&quot;https://developers.google.com/web/fundamentals/primers/service-workers/&quot;&gt;service workers&lt;/a&gt;. Some of the things workbox support like precaching, runtime caching, etc will be covered below.&lt;/p&gt;

&lt;p&gt;Does your browser support workbox and service workers? &lt;a href=&quot;https://love2dev.com/blog/what-browsers-support-service-workers/&quot;&gt;Check here&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;enable-service-worker&quot;&gt;Enable service worker&lt;/h2&gt;
&lt;p&gt;Add this script to the bottom of your website:&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Check that service workers are supported&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;serviceWorker&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;navigator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// Use the window load event to keep the page load performant&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;navigator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;serviceWorker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;/sw.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This tells the browser to wait until the window load and then register for service worker  in &lt;code class=&quot;highlighter-rouge&quot;&gt;/sw.js&lt;/code&gt; route.&lt;/p&gt;

&lt;h2 id=&quot;using-workbox&quot;&gt;Using Workbox&lt;/h2&gt;
&lt;p&gt;There are a few ways to generate service workers using Workbox. I choose to use workbox-cli as I can enable it as part of my build pipeline for my blog which is currently powered by Jekyll. If you use Node or Gulp, you can use &lt;a href=&quot;https://developers.google.com/web/tools/workbox/guides/precache-files/workbox-build&quot;&gt;workbox-build&lt;/a&gt; or if you use Webpack, there is &lt;a href=&quot;https://developers.google.com/web/tools/workbox/guides/precache-files/webpack&quot;&gt;workbox-webpack-plugin&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;install-workbox-cli&quot;&gt;Install workbox-cli&lt;/h3&gt;
&lt;p&gt;Install by using npm:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;npm install workbox-cli --global&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;setup-service-worker&quot;&gt;Setup service worker&lt;/h3&gt;
&lt;p&gt;In &lt;code class=&quot;highlighter-rouge&quot;&gt;sw.js&lt;/code&gt; specify the following boilerplate code:&lt;/p&gt;
&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;importScripts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;https://storage.googleapis.com/workbox-cdn/releases/4.3.1/workbox-sw.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;precaching&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;precacheAndRoute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([])&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Notice we have not specified anything yet to precache. This serves as an injection point for workbox to compute and inject all the routes to be cached.&lt;/p&gt;

&lt;h3 id=&quot;use-workbox-cli-to-populate-what-to-precache&quot;&gt;Use workbox-cli to populate what to precache&lt;/h3&gt;
&lt;p&gt;Run workbox-cli wizard&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;wizard&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;injectManifest&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This command provides the option to specify what to cache by looking at all the file extensions in the website. After this is done, a new file called &lt;code class=&quot;highlighter-rouge&quot;&gt;workbox-config.js&lt;/code&gt; will be created.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;injectManifest&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;js&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This command then uses what is specified in &lt;code class=&quot;highlighter-rouge&quot;&gt;workbox-config.js&lt;/code&gt; and injects all the files to be cached into the injection point we specified above in &lt;code class=&quot;highlighter-rouge&quot;&gt;sw.js&lt;/code&gt; files.&lt;/p&gt;

&lt;h3 id=&quot;manually-specify-what-to-cache-during-runtime&quot;&gt;Manually specify what to cache during runtime&lt;/h3&gt;
&lt;p&gt;There are already a few &lt;a href=&quot;https://developers.google.com/web/tools/workbox/guides/common-recipes&quot;&gt;common recipes&lt;/a&gt; that provide examples of caching css, js, images, etc.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jasonthai.me/sw.js&quot;&gt;I use a few from those recipes for my site&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Caching Images&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;routing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;registerRoute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;sr&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.(?:&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;png|gif|jpg|jpeg|webp|svg&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;$/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;strategies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;CacheFirst&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;cacheName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;images&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;plugins&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;expiration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Plugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;maxEntries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;maxAgeSeconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 30 Days&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}),&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// Cache CSS and JavaScript Files&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;routing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;registerRoute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;sr&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.(?:&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;js|css&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;$/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;strategies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;StaleWhileRevalidate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;cacheName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;static-resources&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// Caching Content from Multiple Origins&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;routing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;registerRoute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;sr&quot;&gt;/.*&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;(?:&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;googleapis|gstatic&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)\.&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;com/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;workbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;strategies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;StaleWhileRevalidate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;add-to-build-and-automate&quot;&gt;Add to build and automate&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://jasonthai.me/blog/2019/07/22/how-to-deploy-a-github-page-using-circleci-20-custom-jekyll-gems/&quot;&gt;Since I am using CircleCI to deploy changes of my site to Github Pages&lt;/a&gt;, I also add the workbox + service worker script generation to the build.&lt;/p&gt;

&lt;p&gt;Declared &lt;code class=&quot;highlighter-rouge&quot;&gt;workbox-config.js&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;globDirectory&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;_site/&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;globPatterns&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;**/*.{html,txt,css,webp,js,json,svg,ico}&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;swDest&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;_site/sw.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;swSrc&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;sw.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In &lt;code class=&quot;highlighter-rouge&quot;&gt;config.yml&lt;/code&gt; file I added:&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;      &lt;span class=&quot;c1&quot;&gt;# -- more omitted --&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;JEKYLL_ENV=production bundle exec jekyll build&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;npm install workbox-cli&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;npx workbox injectManifest workbox-config.js&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# -- more omitted --&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It is quite simple, just added two extra steps to install workbox-cli and run the same command to inject the precache routes.&lt;/p&gt;

&lt;h2 id=&quot;considerations&quot;&gt;Considerations&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Using the workbox-cli, we can cache everything on the site. However, this will not work if the website contains thousands of posts and images as everything will be downloaded to the browser cache.&lt;/li&gt;
  &lt;li&gt;Using the workbox-cli, we can only set service workers to cache our website’s assets. It will not handle caching other website’s sites. This is important because we probably use things like external fonts, javascripts, css files, etc. So we need to manually add that support to our service workers.&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Jason Thai</name></author><category term="tech" /><category term="en" /><summary type="html">Recently I have added offline support for this blog using Workbox. You can test this by going offline and then browsing my blog. This note gives a walkthrough of how I did it and summarizes my findings.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/workbox.webp" /></entry><entry><title type="html">Three Proofs Total Stock Market is Efficient</title><link href="https://jasonthai.me/blog/2019/08/04/three-proofs-total-stock-market-is-efficient/" rel="alternate" type="text/html" title="Three Proofs Total Stock Market is Efficient" /><published>2019-08-04T00:00:00+00:00</published><updated>2019-08-04T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/08/04/three-proofs-total-stock-market-is-efficient</id><content type="html" xml:base="https://jasonthai.me/blog/2019/08/04/three-proofs-total-stock-market-is-efficient/">&lt;p&gt;John Norstad, a retired mathematician, had presented three proofs that prove Total Stock Market (fund) is efficient. This is interesting so this note shares with you those three proofs.
&lt;!--more--&gt;&lt;/p&gt;

&lt;p&gt;You can &lt;a href=&quot;https://web.archive.org/web/20170628202816/http://www.norstad.org/finance/tsmproofs.pdf&quot;&gt;read about the proofs here&lt;/a&gt; and  &lt;a href=&quot;https://www.bogleheads.org/forum/viewtopic.php?f=10&amp;amp;t=286828&quot;&gt;join the bogleheads forum to discuss about the proofs here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have recently switched to mostly investing in &lt;a href=&quot;https://investor.vanguard.com/mutual-funds/profile/vtsax&quot;&gt;Vanguard Total Stock Market Index Fund (VTSAX)&lt;/a&gt; so this study gives me some assurance that this is the right approach. Of course, stock market is volatile and risky, so imo, this only plays out if there is a long time horizon for investing.&lt;/p&gt;

&lt;p&gt;If you are wondering about the asset allocation that I am following, here is the breakdown:&lt;/p&gt;

&lt;p&gt;&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/asset-allocation.webp&quot; alt=&quot;Asset Allocation&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;401K: 100% &lt;a href=&quot;https://investor.vanguard.com/mutual-funds/profile/VFFVX&quot;&gt;Vanguard Target Retirement 2055 Fund (VFFVX)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Roth IRA:  100% &lt;a href=&quot;https://investor.vanguard.com/mutual-funds/profile/vtsax&quot;&gt;VTSAX&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Rollover IRA:  100% &lt;a href=&quot;https://investor.vanguard.com/mutual-funds/profile/vtsax&quot;&gt;VTSAX&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Taxable Account:  100% &lt;a href=&quot;https://investor.vanguard.com/mutual-funds/profile/vtsax&quot;&gt;VTSAX&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This portfolio seems to fit nicely with the approach of lazy investing as I do not have to worry about buying individual stocks and doing the due diligence to research about individual companies. You may argue stock picking can result in better investment over time but I think simplicity is the key to investing.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&quot;https://jasonthai.me/tags#finance&quot;&gt;Checkout some of my other finance’s notes&lt;/a&gt;&lt;/p&gt;</content><author><name>Jason Thai</name></author><category term="finance" /><category term="en" /><summary type="html">John Norstad, a retired mathematician, had presented three proofs that prove Total Stock Market (fund) is efficient. This is interesting so this note shares with you those three proofs.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/blur-chart-data.webp" /></entry><entry><title type="html">What I’m up to in July 2019</title><link href="https://jasonthai.me/blog/2019/08/02/what-im-up-to-in-july-2019/" rel="alternate" type="text/html" title="What I'm up to in July 2019" /><published>2019-08-02T00:00:00+00:00</published><updated>2019-08-02T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/08/02/what-im-up-to-in-july-2019</id><content type="html" xml:base="https://jasonthai.me/blog/2019/08/02/what-im-up-to-in-july-2019/">&lt;p&gt;&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/the-month-july.webp&quot; alt=&quot;July&quot; /&gt;&lt;/p&gt;

&lt;p&gt;First post of what I am hoping will be a series. Here I will update what has been happening with me in the month.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;July has not been kind for Vy. She was sick for almost two weeks. This month was also our anniversary month. What a bummer! The good news is Vy is welcoming August with good health.&lt;/p&gt;

&lt;p&gt;I finally paid off my car loan! Some more stats:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Loan date: July 2014 to July 2019&lt;/li&gt;
  &lt;li&gt;Total amount: &lt;span style=&quot;color: green&quot;&gt;$2,000&lt;/span&gt; (down payment) + &lt;span style=&quot;color: green&quot;&gt;$28,168.33&lt;/span&gt; (0% finance) = &lt;span style=&quot;color: green&quot;&gt;$30,168.33&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;Current value: &lt;span style=&quot;color: green&quot;&gt;$12,831.00&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;Depreciation %: &lt;span style=&quot;color: red&quot;&gt;57.47%&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;My reading list heavily focused on personal finance this month. I got a lot of motivations to write a few of my posts based on these books. They are certainly good reads (pun-intended) so I recommend it to everyone.&lt;/p&gt;

&lt;!-- Show static HTML/CSS as a placeholder in case js is not enabled - javascript include will override this if things work --&gt;
&lt;style type=&quot;text/css&quot; media=&quot;screen&quot;&gt;
.gr_custom_container_1563424843 {
/* customize your Goodreads widget container here*/
border: 1px solid gray;
border-radius:10px;
padding: 10px 5px 10px 5px;
background-color: #FFFFFF;
color: #000000;
width: 300px
}
.gr_custom_header_1563424843 {
/* customize your Goodreads header here*/
border-bottom: 1px solid gray;
width: 100%;
margin-bottom: 5px;
text-align: center;
font-size: 120%
}
.gr_custom_each_container_1563424843 {
/* customize each individual book container here */
width: 100%;
clear: both;
margin-bottom: 10px;
overflow: auto;
padding-bottom: 4px;
border-bottom: 1px solid #aaa;
}
.gr_custom_book_container_1563424843 {
/* customize your book covers here */
overflow: hidden;
height: 60px;
float: left;
margin-right: 4px;
width: 39px;
}
.gr_custom_author_1563424843 {
/* customize your author names here */
font-size: 10px;
}
.gr_custom_tags_1563424843 {
/* customize your tags here */
font-size: 10px;
color: gray;
}
.gr_custom_rating_1563424843 {
/* customize your rating stars here */
float: right;
}
&lt;/style&gt;

&lt;div align=&quot;center&quot; id=&quot;gr_custom_widget_1563424843&quot;&gt;
    &lt;div class=&quot;gr_custom_container_1563424843&quot;&gt;
&lt;h2 class=&quot;gr_custom_header_1563424843&quot;&gt;
&lt;a style=&quot;text-decoration: none;&quot; rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/list/54938708-jason-thai?shelf=july-2019&amp;amp;utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;Jason&amp;#39;s bookshelf: july-2019&lt;/a&gt;
&lt;/h2&gt;
&lt;div class=&quot;gr_custom_each_container_1563424843&quot;&gt;
    &lt;div class=&quot;gr_custom_book_container_1563424843&quot;&gt;
      &lt;a title=&quot;The Simple Path to Wealth: Your road map to financial independence and a rich, free life&quot; rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/show/2849979605?utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;&lt;img alt=&quot;The Simple Path to Wealth: Your road map to financial independence and a rich, free life&quot; border=&quot;0&quot; src=&quot;https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1466299641l/30646587._SY75_.jpg&quot; /&gt;&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_rating_1563424843&quot;&gt;
      &lt;span class=&quot; staticStars notranslate&quot; title=&quot;it was amazing&quot;&gt;&lt;img alt=&quot;it was amazing&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_title_1563424843&quot;&gt;
      &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/show/2849979605?utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;The Simple Path to Wealth: Your road map to financial independence and a rich, free life&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_author_1563424843&quot;&gt;
      by &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/author/show/2936728.J_L_Collins&quot;&gt;J.L. Collins&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_tags_1563424843&quot;&gt;
      tagged:
      july-2019
    &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;gr_custom_each_container_1563424843&quot;&gt;
    &lt;div class=&quot;gr_custom_book_container_1563424843&quot;&gt;
      &lt;a title=&quot;The Millionaire Next Door: The Surprising Secrets of America's Wealthy&quot; rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/show/2854902772?utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;&lt;img alt=&quot;The Millionaire Next Door: The Surprising Secrets of America's Wealthy&quot; border=&quot;0&quot; src=&quot;https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1384821256l/18841345._SY75_.jpg&quot; /&gt;&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_rating_1563424843&quot;&gt;
      &lt;span class=&quot; staticStars notranslate&quot; title=&quot;really liked it&quot;&gt;&lt;img alt=&quot;really liked it&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_inactive.png&quot; /&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_title_1563424843&quot;&gt;
      &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/show/2854902772?utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;The Millionaire Next Door: The Surprising Secrets of America's Wealthy&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_author_1563424843&quot;&gt;
      by &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/author/show/659.Thomas_J_Stanley&quot;&gt;Thomas J. Stanley&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_tags_1563424843&quot;&gt;
      tagged:
      july-2019
    &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;gr_custom_each_container_1563424843&quot;&gt;
    &lt;div class=&quot;gr_custom_book_container_1563424843&quot;&gt;
      &lt;a title=&quot;Your Money or Your Life&quot; rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/show/2875598945?utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;&lt;img alt=&quot;Your Money or Your Life&quot; border=&quot;0&quot; src=&quot;https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1547451646l/43560266._SY75_.jpg&quot; /&gt;&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_rating_1563424843&quot;&gt;
      &lt;span class=&quot; staticStars notranslate&quot; title=&quot;it was amazing&quot;&gt;&lt;img alt=&quot;it was amazing&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;img alt=&quot;&quot; src=&quot;https://www.goodreads.com/images/layout/gr_red_star_active.png&quot; /&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_title_1563424843&quot;&gt;
      &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/review/show/2875598945?utm_medium=api&amp;amp;utm_source=custom_widget&quot;&gt;Your Money or Your Life&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_author_1563424843&quot;&gt;
      by &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/author/show/44527.Vicki_Robin&quot;&gt;Vicki Robin&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gr_custom_tags_1563424843&quot;&gt;
      tagged:
      july-2019
    &lt;/div&gt;
&lt;/div&gt;
&lt;br style=&quot;clear: both&quot; /&gt;
&lt;center&gt;
&lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/&quot;&gt;&lt;img alt=&quot;goodreads.com&quot; style=&quot;border:0&quot; src=&quot;https://www.goodreads.com/images/widget/widget_logo.gif&quot; /&gt;&lt;/a&gt;
&lt;/center&gt;
&lt;noscript&gt;
Share &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/&quot;&gt;book reviews&lt;/a&gt; and ratings with Jason, and even join a &lt;a rel=&quot;nofollow&quot; href=&quot;https://www.goodreads.com/group&quot;&gt;book club&lt;/a&gt; on Goodreads.
&lt;/noscript&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;script src=&quot;https://www.goodreads.com/review/custom_widget/54938708.Jason's%20bookshelf:%20july-2019?cover_position=left&amp;amp;cover_size=small&amp;amp;num_books=5&amp;amp;order=a&amp;amp;shelf=july-2019&amp;amp;show_author=1&amp;amp;show_cover=1&amp;amp;show_rating=1&amp;amp;show_review=1&amp;amp;show_tags=1&amp;amp;show_title=1&amp;amp;sort=date_added&amp;amp;widget_bg_color=FFFFFF&amp;amp;widget_bg_transparent=&amp;amp;widget_border_width=1&amp;amp;widget_id=1563424843&amp;amp;widget_text_color=000000&amp;amp;widget_title_size=medium&amp;amp;widget_width=medium&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;I also ran my first half marathon. You can view more detail about it in this &lt;a href=&quot;/blog/2019/07/28/42nd-biofreeze-sf-marathon-1st-half/&quot;&gt;post&lt;/a&gt;&lt;/p&gt;</content><author><name>Jason Thai</name></author><category term="blog" /><category term="en" /><summary type="html">First post of what I am hoping will be a series. Here I will update what has been happening with me in the month.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/the-month-july.webp" /></entry><entry><title type="html">42nd Biofreeze SF Marathon - 1st Half</title><link href="https://jasonthai.me/blog/2019/07/28/42nd-biofreeze-sf-marathon-1st-half/" rel="alternate" type="text/html" title="42nd Biofreeze SF Marathon - 1st Half" /><published>2019-07-28T00:00:00+00:00</published><updated>2019-07-28T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/07/28/42nd-biofreeze-sf-marathon-1st-half</id><content type="html" xml:base="https://jasonthai.me/blog/2019/07/28/42nd-biofreeze-sf-marathon-1st-half/">&lt;p&gt;I finally ran my first half marathon today 07-28-19 in &lt;a href=&quot;https://www.thesfmarathon.com/&quot;&gt;The 42nd Biofreeze SF Marathon&lt;/a&gt;. This has been one of my goals of the year. Suffice to say it has been one of the best day of my life so far. Here is the result of my race:&lt;/p&gt;

&lt;p&gt;&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/half-marathon.webp&quot; alt=&quot;half marathon result&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Race Report:&lt;/p&gt;

&lt;p&gt;The race started at 6:46 AM at &lt;a href=&quot;https://www.google.com/maps/place/USA/@37.793712,-122.3926053,17z/data=!3m1!4b1!4m2!3m1!1s0x80858065c94cb613:0x1471cf17c56982b1&quot;&gt;Mission Street and The Embarcadero San Francisco&lt;/a&gt;
As soon as I started running, the adrenaline kicked in and I felt I could run faster than normal. However I still tried to keep a pace around 9 minutes / mile.  There were around 6 water stops along the race and I stopped by all of them and refueled with eletrolyte water. The first uphill around half of the race was longer and higher than expected so I was conservative in my pace and slowed down to about 13:30 minutes / mile. Following that was a long downhill which helped me recover my pace, however that had a bad affect on my ankle. Later on, I had to stop by the medic to apply some pain relief gel. This is a surprise to me as the water does provide instant energy and I felt I could run fast again right after drinking. Also I did not have to drink as much as usual. My legs start hurting quite a lot at around 10 mile in, which meant stopping by the medic again for the gel. They seemed to have instant effect but wore off quickly.  I think I could have pushed myself harder in the last 2 miles of the race. In stead I kept conserving energy and when I finished, I didn’t feel as tired as my practice run that I did a few weeks ago.&lt;/p&gt;

&lt;p&gt;Some other stats about my training journey:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Training duration: 8 weeks&lt;/li&gt;
  &lt;li&gt;Number of running hours: 24&lt;/li&gt;
  &lt;li&gt;Number of miles: 145&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;From not being able to run much from February this year, it has been a good journey so far. Ever since I found out about &lt;a href=&quot;https://www.strava.com/athletes/39726096&quot;&gt;Strava&lt;/a&gt;, it has been the source of motivation to get me running. There are a lot of runners out there and seeing how they push themselves everyday to run harder and faster is truly wonderful. I am glad to join the running club and hoping to continue for a long time. Also thank you to my friend Tri Hoang for pushing me, it is good to have a running buddy.&lt;/p&gt;

&lt;p&gt;If you want to get started in running, I suggest checking out &lt;a href=&quot;https://www.c25k.com/&quot;&gt;Couch 2 5K Program&lt;/a&gt;. This will help guide you along the way from not running to your first 5K. Get out there and start running!&lt;/p&gt;</content><author><name>Jason Thai</name></author><category term="blog" /><category term="en" /><summary type="html">I finally ran my first half marathon today 07-28-19 in The 42nd Biofreeze SF Marathon. This has been one of my goals of the year. Suffice to say it has been one of the best day of my life so far. Here is the result of my race: Race Report: The race started at 6:46 AM at Mission Street and The Embarcadero San Francisco As soon as I started running, the adrenaline kicked in and I felt I could run faster than normal. However I still tried to keep a pace around 9 minutes / mile. There were around 6 water stops along the race and I stopped by all of them and refueled with eletrolyte water. The first uphill around half of the race was longer and higher than expected so I was conservative in my pace and slowed down to about 13:30 minutes / mile. Following that was a long downhill which helped me recover my pace, however that had a bad affect on my ankle. Later on, I had to stop by the medic to apply some pain relief gel. This is a surprise to me as the water does provide instant energy and I felt I could run fast again right after drinking. Also I did not have to drink as much as usual. My legs start hurting quite a lot at around 10 mile in, which meant stopping by the medic again for the gel. They seemed to have instant effect but wore off quickly. I think I could have pushed myself harder in the last 2 miles of the race. In stead I kept conserving energy and when I finished, I didn’t feel as tired as my practice run that I did a few weeks ago. Some other stats about my training journey: Training duration: 8 weeks Number of running hours: 24 Number of miles: 145 From not being able to run much from February this year, it has been a good journey so far. Ever since I found out about Strava, it has been the source of motivation to get me running. There are a lot of runners out there and seeing how they push themselves everyday to run harder and faster is truly wonderful. I am glad to join the running club and hoping to continue for a long time. Also thank you to my friend Tri Hoang for pushing me, it is good to have a running buddy. If you want to get started in running, I suggest checking out Couch 2 5K Program. This will help guide you along the way from not running to your first 5K. Get out there and start running!</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/half-marathon-cover.webp" /></entry><entry><title type="html">Apply Different Styles to Mobile vs Web View Using @media</title><link href="https://jasonthai.me/blog/2019/07/27/apply-different-styles-to-mobile-vs-web-view-using-media/" rel="alternate" type="text/html" title="Apply Different Styles to Mobile vs Web View Using @media" /><published>2019-07-27T00:00:00+00:00</published><updated>2019-07-27T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/07/27/apply-different-styles-to-mobile-vs-web-view-using-media</id><content type="html" xml:base="https://jasonthai.me/blog/2019/07/27/apply-different-styles-to-mobile-vs-web-view-using-media/">&lt;p&gt;This note goes over how I render the mobile and web view of my site differently to optimize user experience on different screen sizes with the use of &lt;code class=&quot;highlighter-rouge&quot;&gt;@media&lt;/code&gt;  queries.
&lt;!--more--&gt;
First let’s examine how it looks on web vs mobile:&lt;/p&gt;

&lt;h2 id=&quot;web-view&quot;&gt;Web View:&lt;/h2&gt;
&lt;p&gt;This view is designed to be viewed on devices with larger screen like laptops or desktops and it includes more information such as the cover image and description of the post.&lt;/p&gt;

&lt;p&gt;&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/jasonthai-web-view.webp&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;mobile-view&quot;&gt;Mobile View:&lt;/h2&gt;
&lt;p&gt;The view on mobile is optimized a lot more for information browsing. The image and description are eliminated in favor of more number of articles in the view. This makes viewing on mobile devices faster too since the browser does not have to load any images.&lt;/p&gt;

&lt;p&gt;&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/jasonthai-mobile-view.webp&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;how-to-using-media&quot;&gt;How to: using @media&lt;/h2&gt;
&lt;p&gt;Using &lt;code class=&quot;highlighter-rouge&quot;&gt;@media&lt;/code&gt; query, we can define specific css behavior depending on certain width or height of the screen. You can learn more about it &lt;a href=&quot;https://www.w3schools.com/cssref/css3_pr_mediaquery.asp&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;For example, the following query will apply to device with screen width up to 480px&lt;/p&gt;
&lt;div class=&quot;language-css highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;@media&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;screen&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max-width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;480px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;css&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;here&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For my specific site, this is what I define:&lt;/p&gt;
&lt;div class=&quot;language-css highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;@media&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;screen&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max-width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;600px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nc&quot;&gt;.bg-img&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;none&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;err&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;hiding&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;cover&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;image&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;nc&quot;&gt;.excerpt&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;none&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;err&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;hiding&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;description&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Using @media is a simple way to apply specific styles to different media/screens. I believe there are other ways to do it too such as grid or flex view. I am going to take a look at those a different time.&lt;/p&gt;</content><author><name>Jason Thai</name></author><category term="tech" /><category term="en" /><summary type="html">This note goes over how I render the mobile and web view of my site differently to optimize user experience on different screen sizes with the use of @media queries.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/responsive-media-queries.webp" /></entry><entry><title type="html">Customize Part of Your Life with IFTTT</title><link href="https://jasonthai.me/blog/2019/07/26/customize-part-of-your-life-with-ifttt/" rel="alternate" type="text/html" title="Customize Part of Your Life with IFTTT" /><published>2019-07-26T00:00:00+00:00</published><updated>2019-07-26T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/07/26/customize-part-of-your-life-with-ifttt</id><content type="html" xml:base="https://jasonthai.me/blog/2019/07/26/customize-part-of-your-life-with-ifttt/">&lt;p&gt;&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/ifttt-featured.webp&quot; alt=&quot;IFTTT feature&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I have been using &lt;a href=&quot;https://ifttt.com&quot;&gt;IFTTT&lt;/a&gt; to automate a part of my life and I figure it is useful not just to me but to others as well. This post lists some of the useful applets I use to improve my day to day activities.
&lt;!--more--&gt;&lt;/p&gt;
&lt;h2 id=&quot;what-is-ifttt&quot;&gt;What is IFTTT?&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://help.ifttt.com/hc/en-us/articles/115010325748-What-is-IFTTT-&quot;&gt;From IFTTT&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;IFTTT is the free way to do more with hundreds of the apps and devices you love, including Twitter, Dropbox, Evernote, Nest, Fitbit, Amazon Alexa, and Google Assistant.&lt;/p&gt;

  &lt;p&gt;On IFTTT, we call those services. To see all of the services on IFTTT, check out our services list.
We bring services together into Applets. Applets are specific things that can happen when you connect services — things your apps can’t do on their own.&lt;/p&gt;

  &lt;p&gt;For example, you could use an Applet to sync Amazon Alexa to-dos with your Google Calendar. Or one that lets you create events in your iPhone Calendar, via Google Assistant.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Essentially you can connect service A and service B to produce some events or activities C configured in an applet.&lt;/p&gt;

&lt;h2 id=&quot;how-does-ifttt-work&quot;&gt;How does IFTTT work?&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://help.ifttt.com/hc/en-us/articles/115010158167-How-does-IFTTT-work-&quot;&gt;From IFTTT&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;IFTTT helps you connect all of your different apps and devices. When you sign up for a free account, you can turn on Applets that help your apps and devices work together to do specific things they couldn’t do otherwise. For example, you can back up your Instagram photos to Dropbox, have your lights turn on when you enter your home, or automatically remind a Slack channel about a meeting. There are millions of Applets to explore.&lt;/p&gt;

  &lt;p&gt;Here’s how it works:&lt;/p&gt;

  &lt;ol&gt;
    &lt;li&gt;&lt;a href=&quot;https://ifttt.com/join&quot;&gt;Create a free account.&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;Browse the IFTTT website or app to find an Applet that interests you.&lt;/li&gt;
    &lt;li&gt;Click into the Applet and turn it on.&lt;/li&gt;
    &lt;li&gt;Connect the services that are involved in the Applet — this is only so we can use them to run Applets on your behalf. IFTTT provides a layer between different services to only allow them to do what you specifically tell them to do.&lt;/li&gt;
    &lt;li&gt;Find more Applets, and repeat!&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;I usually download the mobile app to set up and configure the applets. They are available on both &lt;a href=&quot;https://play.google.com/store/apps/details?id=com.ifttt.ifttt&amp;amp;hl=en_US&quot;&gt;Android&lt;/a&gt; and &lt;a href=&quot;https://apps.apple.com/us/app/ifttt/id660944635&quot;&gt;iOS&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;some-applets-i-use&quot;&gt;Some Applets I use&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://ifttt.com/applets/YY9Mqgw5-get-the-weather-forecast-every-day-at-7-00-am?term=weather%2520underground%25208%2520AM&quot;&gt;Get weather forecast at 7 AM&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ifttt.com/applets/ULC789F5-get-rain-alert?term=get%2520caltrain%2520update&quot;&gt;Get rain alert&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ifttt.com/applets/PRM3EF6b-get-mobile-notifications-for-new-items-in-an-rss-feed-you-choose?term=rss%252520feed&quot;&gt;Receive new AWS announcements through RSS feed&lt;/a&gt; - &lt;a href=&quot;http://aws.amazon.com/new/feed/&quot;&gt;AWS news feed&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ifttt.com/applets/375373p-save-a-photo-when-detect-moviment&quot;&gt;Capture Ring security camera photo if motion is detected&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Those are just a few that I am using. There are definitely a lot of useful integrations available on IFTTT. I highly recommend you check it out. You can also build your own integration and customize them to fit with your activities.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;I think IFTTT is a very powerful service that is useful to almost everyone. From various existing integrations to new ones that you can build, I am sure you will benefit from the service. Give it a try!&lt;/p&gt;</content><author><name>Jason Thai</name></author><category term="tech" /><category term="en" /><summary type="html">I have been using IFTTT to automate a part of my life and I figure it is useful not just to me but to others as well. This post lists some of the useful applets I use to improve my day to day activities.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/ifttt-featured.webp" /></entry><entry><title type="html">My Blog’s PageSpeed Insights Score</title><link href="https://jasonthai.me/blog/2019/07/26/my-blog-pagespeed-insights-score-jasonthai-me/" rel="alternate" type="text/html" title="My Blog's PageSpeed Insights Score" /><published>2019-07-26T00:00:00+00:00</published><updated>2019-07-26T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/07/26/my-blog-pagespeed-insights-score-jasonthai-me</id><content type="html" xml:base="https://jasonthai.me/blog/2019/07/26/my-blog-pagespeed-insights-score-jasonthai-me/">&lt;p&gt;&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/pagespeed-full.webp&quot; alt=&quot;PageSpeed Insights&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;

&lt;p&gt;I have been testing how responsive my blog is and PageSpeed Insights give me a pretty good idea of the result. Certainly there are always improvements to be made but for now I am quite glad that the site is snappy.&lt;/p&gt;

&lt;!--more--&gt;
&lt;p&gt;&lt;a href=&quot;https://developers.google.com/speed/pagespeed/insights/?url=https%3A%2F%2Fjasonthai.me%2F&amp;amp;tab=desktop&quot;&gt;Check my blog’s PageSpeed Insights Score&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I also tried out &lt;a href=&quot;https://developers.google.com/web/tools/lighthouse&quot;&gt;Lighthouse&lt;/a&gt;, an open source tool to audit my site’s performance. The result is &lt;a href=&quot;/assets/js/jasonthai.me-20190726T112605.json&quot;&gt;here&lt;/a&gt; in json or you can download the file and use &lt;a href=&quot;https://googlechrome.github.io/lighthouse/viewer/&quot;&gt;Lighthouse Report Viewer&lt;/a&gt; for the graphical view.&lt;/p&gt;

&lt;p&gt;Some other tools to test your site are &lt;a href=&quot;https://tools.pingdom.com&quot;&gt;Pingdom&lt;/a&gt; and &lt;a href=&quot;https://gtmetrix.com/&quot;&gt;GTmetrix&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;things-i-have-done-to-improve-speed&quot;&gt;Things I have done to improve speed&lt;/h2&gt;

&lt;h3 id=&quot;leverage-cloudflare-for-its-ssl-and-cdn-service&quot;&gt;Leverage &lt;a href=&quot;https://cloudflare.com&quot;&gt;Cloudflare&lt;/a&gt; for its SSL and CDN service&lt;/h3&gt;
&lt;p&gt;Cloudflare CDN ensures that my site is highly available and fast. Its SSL service also ensures your connection to my site is secure.&lt;/p&gt;

&lt;h3 id=&quot;load-scripts-asynchronously&quot;&gt;Load scripts asynchronously&lt;/h3&gt;
&lt;p&gt;Since scripts by default will block the rendering of the page, I use &lt;code class=&quot;highlighter-rouge&quot;&gt;async&lt;/code&gt; attribute to have them loaded asynchronously.&lt;/p&gt;

&lt;h3 id=&quot;less-use-of-style-and-scripts&quot;&gt;Less use of style and scripts&lt;/h3&gt;
&lt;p&gt;The more scripts and styles a page has, the slower it becomes. I try not to overload the site with these things.&lt;/p&gt;

&lt;p&gt;I also include CSS and javascripts directly on the page if they are small to reduce HTTP calls to fetch them.&lt;/p&gt;

&lt;h3 id=&quot;lazyload-images-and-webp-format&quot;&gt;Lazyload images and webp format&lt;/h3&gt;
&lt;p&gt;I optimize the images by converting them to &lt;a href=&quot;https://developers.google.com/speed/webp/&quot;&gt;webp format&lt;/a&gt; and using &lt;a href=&quot;https://github.com/aFarkas/lazysizes&quot;&gt;lazyloading&lt;/a&gt;  so they take less time to load and render.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;To be clear, I do not think having a high score means the website is awesome. It also has to do with other factors like quality of content. That said, user experience is very important and we should not make the users wait to view our content.&lt;/p&gt;</content><author><name>Jason Thai</name></author><category term="tech" /><category term="en" /><summary type="html">Introduction I have been testing how responsive my blog is and PageSpeed Insights give me a pretty good idea of the result. Certainly there are always improvements to be made but for now I am quite glad that the site is snappy.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/pagespeed-featured.webp" /></entry><entry><title type="html">TinyAlias URL Shortener Design and Its Features</title><link href="https://jasonthai.me/blog/2019/07/25/tinyalias-url-shortener-design-and-features/" rel="alternate" type="text/html" title="TinyAlias URL Shortener Design and Its Features" /><published>2019-07-25T00:00:00+00:00</published><updated>2019-07-25T00:00:00+00:00</updated><id>https://jasonthai.me/blog/2019/07/25/tinyalias-url-shortener-design-and-features</id><content type="html" xml:base="https://jasonthai.me/blog/2019/07/25/tinyalias-url-shortener-design-and-features/">&lt;style&gt;

.mySlides {display: none}
img {vertical-align: middle;}

/* Slideshow container */
.slideshow-container {
  max-width: 1000px;
  position: relative;
  margin: auto;
}

/* Next &amp; previous buttons */
.prevImg, .nextImg {
  cursor: pointer;
  position: absolute;
  top: 50%;
  width: auto;
  padding: 16px;
  margin-top: -22px;
  color: white;
  font-weight: bold;
  font-size: 18px;
  transition: 0.6s ease;
  border-radius: 0 3px 3px 0;
  user-select: none;
}

/* Position the &quot;next button&quot; to the right */
.nextImg {
  right: 0;
  border-radius: 3px 0 0 3px;
}

/* On hover, add a black background color with a little bit see-through */
.prevImg:hover, .nextImg:hover {
  background-color: rgba(0,0,0,0.8);
}

/* Caption text */
.textImg {
  color: #f2f2f2;
  font-size: 15px;
  padding: 8px 12px;
  position: absolute;
  bottom: 8px;
  width: 100%;
  text-align: center;
}

/* Number text (1/3 etc) */
.numbertextImg {
  color: #f2f2f2;
  font-size: 12px;
  padding: 8px 12px;
  position: absolute;
  top: 0;
}

/* The dots/bullets/indicators */
.dot {
  cursor: pointer;
  height: 15px;
  width: 15px;
  margin: 0 2px;
  background-color: #bbb;
  border-radius: 50%;
  display: inline-block;
  transition: background-color 0.6s ease;
}

.active, .dot:hover {
  background-color: #717171;
}

/* Fading animation */
.fade {
  -webkit-animation-name: fade;
  -webkit-animation-duration: 1.5s;
  animation-name: fade;
  animation-duration: 1.5s;
}

@-webkit-keyframes fade {
  from {opacity: .4} 
  to {opacity: 1}
}

@keyframes fade {
  from {opacity: .4} 
  to {opacity: 1}
}

/* On smaller screens, decrease text size */
@media only screen and (max-width: 300px) {
  .prevImg, .nextImg,.textImg {font-size: 11px}
}
&lt;/style&gt;

&lt;p&gt;After I wrote some of my thoughts about my URL shortener service TinayAlias and others here in &lt;a href=&quot;/blog/2019/06/05/thoughts-on-url-shortener-service/&quot;&gt;Things I’ve Learned Hosting a URL Shortener Service&lt;/a&gt;. It occured to me I did not mention much about what my service had to offer. Even though TinyAlias is no longer operational, I feel the service did provide some interesting features compared to others. This post will lay out its design and highlight a few interesting things with respect to both backend and front end implementations.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;screenshots&quot;&gt;Screenshots&lt;/h2&gt;
&lt;!-- Slideshow container --&gt;
&lt;div class=&quot;slideshow-container&quot;&gt;

&lt;!-- Full-width images with number and caption text --&gt;
&lt;div class=&quot;mySlides fade&quot;&gt;
&lt;div class=&quot;numbertextImg&quot;&gt;1 / 5&lt;/div&gt;

&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/tinyalias-authentication.webp&quot; alt=&quot;TinyAlias Authentication&quot; /&gt;

&lt;/div&gt;

&lt;div class=&quot;mySlides fade&quot;&gt;
&lt;div class=&quot;numbertextImg&quot;&gt;2 / 5&lt;/div&gt;

&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/tinyalias-password.webp&quot; alt=&quot;TinyAlias Password&quot; /&gt;

&lt;/div&gt;

&lt;div class=&quot;mySlides fade&quot;&gt;
&lt;div class=&quot;numbertextImg&quot;&gt;3 / 5&lt;/div&gt;

&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/tinyalias-analytics.webp&quot; alt=&quot;TinyAlias Analytics&quot; /&gt;

&lt;/div&gt;

&lt;div class=&quot;mySlides fade&quot;&gt;
&lt;div class=&quot;numbertextImg&quot;&gt;4 / 5&lt;/div&gt;

&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/tinyalias-mindful.webp&quot; alt=&quot;TinyAlias Mindful&quot; /&gt;

&lt;/div&gt;

&lt;div class=&quot;mySlides fade&quot;&gt;
&lt;div class=&quot;numbertextImg&quot;&gt;5 / 5&lt;/div&gt;

&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/tinyalias-news.webp&quot; alt=&quot;TinyAlias News&quot; /&gt;

&lt;/div&gt;

&lt;!-- Next and previous buttons --&gt;
&lt;a class=&quot;prevImg&quot; onclick=&quot;plusSlides(-1)&quot;&gt;&amp;#10094;&lt;/a&gt;
&lt;a class=&quot;nextImg&quot; onclick=&quot;plusSlides(1)&quot;&gt;&amp;#10095;&lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;!-- The dots/circles --&gt;
&lt;div style=&quot;text-align:center&quot;&gt;
&lt;span class=&quot;dot&quot; onclick=&quot;currentSlide(1)&quot;&gt;&lt;/span&gt; 
&lt;span class=&quot;dot&quot; onclick=&quot;currentSlide(2)&quot;&gt;&lt;/span&gt; 
&lt;span class=&quot;dot&quot; onclick=&quot;currentSlide(3)&quot;&gt;&lt;/span&gt; 
&lt;span class=&quot;dot&quot; onclick=&quot;currentSlide(4)&quot;&gt;&lt;/span&gt; 
&lt;span class=&quot;dot&quot; onclick=&quot;currentSlide(5)&quot;&gt;&lt;/span&gt; 
&lt;/div&gt;

&lt;h2 id=&quot;design&quot;&gt;Design&lt;/h2&gt;

&lt;p&gt;&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto; max-width: 100%; height: auto;&quot; src=&quot;https://jasonthai.me/assets/img/tinyalias-diagram.webp&quot; alt=&quot;TinyAlias Design&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;workflow&quot;&gt;Workflow&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;The Main app handles the main logic of creating shortened URL and its metadata, user authentication, and other blocking operations.&lt;/li&gt;
  &lt;li&gt;The Worker service receives a job from the job queue and executes tasks such as parsing request’s geolocation, detecting spam, expiring URL, and other non-blocking operations.&lt;/li&gt;
  &lt;li&gt;The Scheduler service runs as a cron to delegate jobs to the worker service.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;repo&quot;&gt;Repo&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/zirius/tinyalias&quot;&gt;https://github.com/zirius/tinyalias&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;features&quot;&gt;Features&lt;/h2&gt;

&lt;p&gt;Some function and feature highlights&lt;/p&gt;

&lt;h3 id=&quot;user-authentication&quot;&gt;User authentication&lt;/h3&gt;

&lt;p&gt;I added a user authentication flow that let you sign up, sign in, reset your password. Building this from scratch is quite fun. Sessions are Cookie-based and passwords are encrypted by &lt;code class=&quot;highlighter-rouge&quot;&gt;bcrypt&lt;/code&gt; and stored in DB.&lt;/p&gt;

&lt;h3 id=&quot;password-protected-links-and-link-expiration&quot;&gt;Password protected links and link expiration&lt;/h3&gt;
&lt;p&gt;Link passwords are encrypted securely and stored in DB. Scheduler service periodically sends expiration job to worker service to detect if any links have expired and marked them as invalid.&lt;/p&gt;

&lt;h3 id=&quot;spam-detection-flow&quot;&gt;Spam detection flow&lt;/h3&gt;
&lt;p&gt;This is one of the more interesting backend features I added. Whenever a URL is shortened, the main app will dispatch a spam detection job to the worker service. Worker service then calls Google &lt;a href=&quot;https://safebrowsing.google.com/&quot;&gt;safebrowsing&lt;/a&gt; API to detect if a URL is safe and update that URL status. The scheduler also periodically dispatch spam detection jobs to recheck existing URLs.&lt;/p&gt;

&lt;h3 id=&quot;analytics&quot;&gt;Analytics&lt;/h3&gt;
&lt;p&gt;Whenever a link is clicked, the service will parse the location based on the user’s IP address. This is then aggregated to show where the links are accessed geographically.&lt;/p&gt;

&lt;h3 id=&quot;mindful-mode&quot;&gt;Mindful mode&lt;/h3&gt;
&lt;p&gt;This is a fun feature that I added that makes the user wait for a few seconds before redirecting them to the original URL. The page also displays some quotes of the day provided by &lt;a href=&quot;https://favqs.com&quot;&gt;https://favqs.com&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;news&quot;&gt;News&lt;/h3&gt;
&lt;p&gt;I also added a page to allow users to view trending news and get the shortened URL within the app. News is provided by &lt;a href=&quot;https://newsapi.org/&quot;&gt;News API&lt;/a&gt;.&lt;/p&gt;

&lt;script type=&quot;text/javascript&quot;&gt;
var slideIndex = 1;
showSlides(slideIndex);

function plusSlides(n) {
  showSlides(slideIndex += n);
}

function currentSlide(n) {
  showSlides(slideIndex = n);
}

function showSlides(n) {
  var i;
  var slides = document.getElementsByClassName(&quot;mySlides&quot;);
  var dots = document.getElementsByClassName(&quot;dot&quot;);
  if (n &gt; slides.length) {slideIndex = 1}    
  if (n &lt; 1) {slideIndex = slides.length}
  for (i = 0; i &lt; slides.length; i++) {
      slides[i].style.display = &quot;none&quot;;  
  }
  for (i = 0; i &lt; dots.length; i++) {
      dots[i].className = dots[i].className.replace(&quot; active&quot;, &quot;&quot;);
  }
  slides[slideIndex-1].style.display = &quot;block&quot;;  
  dots[slideIndex-1].className += &quot; active&quot;;
}
&lt;/script&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Designing and implementing TinyAlias from scratch is a fun side project for me.&lt;/p&gt;</content><author><name>Jason Thai</name></author><category term="tech" /><category term="en" /><summary type="html">After I wrote some of my thoughts about my URL shortener service TinayAlias and others here in Things I’ve Learned Hosting a URL Shortener Service. It occured to me I did not mention much about what my service had to offer. Even though TinyAlias is no longer operational, I feel the service did provide some interesting features compared to others. This post will lay out its design and highlight a few interesting things with respect to both backend and front end implementations.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://jasonthai.me/assets/img/tinyalias.webp" /></entry></feed>